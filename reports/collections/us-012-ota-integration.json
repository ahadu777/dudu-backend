{
  "info": {
    "name": "US-012: OTAå¹³å°å®Œæ•´é›†æˆæµ‹è¯•2",
    "description": "åŒ…å«é¢„è®¢æµç¨‹ã€é¢„åˆ¶ç¥¨æ®æµç¨‹ã€çŠ¶æ€è½¬æ¢éªŒè¯çš„å®Œæ•´æµ‹è¯•é›†åˆ",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "api_key",
      "value": "ota_test_key_12345",
      "type": "string"
    },
    {
      "key": "reservation_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "order_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "ticket_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_reservation_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_ticket_code",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
      "item": [
        {
          "name": "1.0 æŸ¥è¯¢äº§å“ç›®å½• ğŸ“¦",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›äº§å“åˆ—è¡¨\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('products');",
                  "    pm.expect(jsonData).to.have.property('total_count');",
                  "    pm.expect(jsonData.products.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"äº§å“åŒ…å«å®Œæ•´ä¿¡æ¯\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var product = jsonData.products[0];",
                  "    pm.expect(product).to.have.property('product_id');",
                  "    pm.expect(product).to.have.property('name');",
                  "    pm.expect(product).to.have.property('sku');",
                  "    pm.expect(product).to.have.property('unit_price');",
                  "    pm.expect(product).to.have.property('functions');",
                  "    pm.expect(product).to.have.property('channel_allocations');",
                  "});",
                  "",
                  "console.log(\"äº§å“æ€»æ•°:\", pm.response.json().total_count);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/products?product_ids=106,107,108",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "products"
              ],
              "query": [
                {
                  "key": "product_ids",
                  "value": "106,107,108",
                  "description": "å¯é€‰ï¼šæŒ‡å®šäº§å“IDåˆ—è¡¨"
                }
              ]
            },
            "description": "æŸ¥è¯¢OTAå¯å”®äº§å“ç›®å½•ï¼ŒåŒ…å«äº§å“è¯¦æƒ…ã€åŠŸèƒ½entitlementså’Œæ¸ é“åº“å­˜åˆ†é…"
          },
          "response": []
        },
        {
          "name": "1.1 æŸ¥è¯¢OTAåº“å­˜",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›åº“å­˜æ•°æ®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('available_quantities');",
                  "    pm.expect(jsonData.available_quantities).to.have.property('106');",
                  "    pm.expect(jsonData.available_quantities).to.have.property('107');",
                  "    pm.expect(jsonData.available_quantities).to.have.property('108');",
                  "});",
                  "",
                  "console.log(\"âœ… å¯ç”¨åº“å­˜:\", pm.response.json().available_quantities);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/inventory",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "inventory"
              ]
            },
            "description": "æŸ¥è¯¢OTAæ¸ é“å¯ç”¨çš„åº“å­˜æ•°é‡"
          },
          "response": []
        },
        {
          "name": "1.2 åˆ›å»ºé¢„è®¢",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›é¢„è®¢ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('reservation_id');",
                  "    pm.expect(jsonData).to.have.property('reserved_until');",
                  "    pm.expect(jsonData).to.have.property('pricing_snapshot');",
                  "    pm.collectionVariables.set('reservation_id', jsonData.reservation_id);",
                  "});",
                  "",
                  "console.log(\"âœ… é¢„è®¢ID:\", pm.response.json().reservation_id);",
                  "console.log(\"   æœ‰æ•ˆæœŸè‡³:\", pm.response.json().reserved_until);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 25\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reserve",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reserve"
              ]
            },
            "description": "ä¸ºPremium Planåˆ›å»º25ä¸ªå•ä½çš„é¢„è®¢"
          },
          "response": []
        },
        {
          "name": "1.3 æŸ¥è¯¢é¢„è®¢è¯¦æƒ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"é¢„è®¢çŠ¶æ€ä¸ºactive\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('active');",
                  "    pm.expect(jsonData.product_id).to.eql(106);",
                  "    pm.expect(jsonData.quantity).to.eql(25);",
                  "});",
                  "",
                  "console.log(\"âœ… é¢„è®¢è¯¦æƒ…:\", pm.response.json());"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/reservations/{{reservation_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reservations",
                "{{reservation_id}}"
              ]
            },
            "description": "æŸ¥è¯¢åˆšåˆ›å»ºçš„é¢„è®¢è¯¦æƒ…"
          },
          "response": []
        },
        {
          "name": "1.4 æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸ â­",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"è®¢å•åˆ›å»ºæˆåŠŸ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('order_id');",
                  "    pm.expect(jsonData).to.have.property('tickets');",
                  "    pm.expect(jsonData).to.have.property('total_amount');",
                  "    pm.expect(jsonData).to.have.property('confirmation_code');",
                  "    pm.collectionVariables.set('order_id', jsonData.order_id);",
                  "});",
                  "",
                  "pm.test(\"ç”Ÿæˆäº†25å¼ ç¥¨åˆ¸\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.tickets).to.have.lengthOf(25);",
                  "});",
                  "",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«entitlements\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var firstTicket = jsonData.tickets[0];",
                  "    pm.expect(firstTicket).to.have.property('entitlements');",
                  "    pm.expect(firstTicket.entitlements.length).to.be.above(0);",
                  "});",
                  "",
                  "console.log(\"âœ… è®¢å•ID:\", pm.response.json().order_id);",
                  "console.log(\"   ç¥¨åˆ¸æ•°é‡:\", pm.response.json().tickets.length);",
                  "console.log(\"   æ€»é‡‘é¢:\", pm.response.json().total_amount);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"å¼ ä¸‰\",\n    \"email\": \"zhangsan@example.com\",\n    \"phone\": \"+86 138 0000 0001\"\n  },\n  \"payment_reference\": \"PAY-TEST-001\",\n  \"special_requests\": \"è¯·å®‰æ’é çª—åº§ä½\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reservations/{{reservation_id}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reservations",
                "{{reservation_id}}",
                "activate"
              ]
            },
            "description": "æ¿€æ´»é¢„è®¢ï¼Œç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸"
          },
          "response": []
        },
        {
          "name": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›è®¢å•åˆ—è¡¨\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('orders');",
                  "    pm.expect(jsonData).to.have.property('total_count');",
                  "    pm.expect(jsonData.orders.length).to.be.above(0);",
                  "});",
                  "",
                  "console.log(\"âœ… è®¢å•æ€»æ•°:\", pm.response.json().total_count);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "orders"
              ]
            },
            "description": "æŸ¥è¯¢æ‰€æœ‰OTAè®¢å•"
          },
          "response": []
        },
        {
          "name": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›è®¢å•è¯¦æƒ…\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('order_id');",
                  "    pm.expect(jsonData).to.have.property('product_id');",
                  "    pm.expect(jsonData).to.have.property('customer_name');",
                  "    pm.expect(jsonData).to.have.property('customer_email');",
                  "    pm.expect(jsonData).to.have.property('total_amount');",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('confirmation_code');",
                  "});",
                  "",
                  "pm.test(\"è®¢å•åŒ…å«é¢„è®¢å…³è”\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('reservation_id');",
                  "});",
                  "",
                  "console.log(\"è®¢å•è¯¦æƒ…:\", pm.response.json());"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "æŸ¥è¯¢å•ä¸ªè®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬å®¢æˆ·ä¿¡æ¯ã€é‡‘é¢ã€çŠ¶æ€å’Œé¢„è®¢å…³è”"
          },
          "response": []
        },
        {
          "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('tickets');",
                  "    pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var firstTicket = jsonData.tickets[0];",
                  "    pm.expect(firstTicket).to.have.property('ticket_code');",
                  "    pm.expect(firstTicket).to.have.property('qr_code');",
                  "    pm.expect(firstTicket).to.have.property('entitlements');",
                  "    pm.expect(firstTicket).to.have.property('status');",
                  "});",
                  "",
                  "console.log(\"âœ… ç¥¨åˆ¸æ•°é‡:\", pm.response.json().tickets.length);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "orders",
                "{{order_id}}",
                "tickets"
              ]
            },
            "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç "
          },
          "response": []
        }
      ],
      "description": "æµ‹è¯•å®Œæ•´çš„é¢„è®¢æ¿€æ´»æµç¨‹ï¼šåº“å­˜æŸ¥è¯¢ â†’ åˆ›å»ºé¢„è®¢ â†’ æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸"
    },
    {
      "name": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
      "item": [
        {
          "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('batch_id');",
                  "    pm.expect(jsonData).to.have.property('tickets');",
                  "    pm.expect(jsonData).to.have.property('total_generated');",
                  "    pm.expect(jsonData.total_generated).to.eql(10);",
                  "});",
                  "",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var firstTicket = jsonData.tickets[0];",
                  "    pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "    pm.collectionVariables.set('ticket_code', firstTicket.ticket_code);",
                  "});",
                  "",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var firstTicket = jsonData.tickets[0];",
                  "    pm.expect(firstTicket).to.have.property('qr_code');",
                  "    pm.expect(firstTicket).to.have.property('entitlements');",
                  "    pm.expect(firstTicket.entitlements.length).to.be.above(0);",
                  "});",
                  "",
                  "console.log(\"âœ… æ‰¹æ¬¡ID:\", pm.response.json().batch_id);",
                  "console.log(\"   ç”Ÿæˆæ•°é‡:\", pm.response.json().total_generated);",
                  "console.log(\"   ç¬¬ä¸€å¼ ç¥¨æ®ç :\", pm.response.json().tickets[0].ticket_code);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 107,\n  \"quantity\": 10,\n  \"batch_id\": \"BATCH-{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/bulk-generate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "bulk-generate"
              ]
            },
            "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®"
          },
          "response": []
        },
        {
          "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('ticket_code');",
                  "    pm.expect(jsonData).to.have.property('order_id');",
                  "    pm.expect(jsonData).to.have.property('customer_name');",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('activated_at');",
                  "    pm.collectionVariables.set('order_id', jsonData.order_id);",
                  "});",
                  "",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "});",
                  "",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.customer_name).to.eql('æå››');",
                  "});",
                  "",
                  "console.log(\"âœ… ç¥¨æ®ç :\", pm.response.json().ticket_code);",
                  "console.log(\"   è®¢å•ID:\", pm.response.json().order_id);",
                  "console.log(\"   æ¿€æ´»çŠ¶æ€:\", pm.response.json().status);",
                  "console.log(\"   æ¿€æ´»æ—¶é—´:\", pm.response.json().activated_at);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"æå››\",\n    \"email\": \"lisi@example.com\",\n    \"phone\": \"+86 138 0000 0002\"\n  },\n  \"payment_reference\": \"PAY-TEST-002\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "{{ticket_code}}",
                "activate"
              ]
            },
            "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•"
          },
          "response": []
        },
        {
          "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('tickets');",
                  "    pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "});",
                  "",
                  "console.log(\"âœ… è®¢å•ç¥¨æ®éªŒè¯é€šè¿‡\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "orders",
                "{{order_id}}",
                "tickets"
              ]
            },
            "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®"
          },
          "response": []
        }
      ],
      "description": "æµ‹è¯•é¢„åˆ¶ç¥¨æ®æµç¨‹ï¼šæ‰¹é‡ç”Ÿæˆç¥¨æ® â†’ å•å¼ æ¿€æ´» â†’ ç»‘å®šå®¢æˆ· â†’ ç”Ÿæˆè®¢å•"
    },
    {
      "name": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
      "item": [
        {
          "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(201);",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.total_generated).to.eql(5);",
                  "});",
                  "",
                  "console.log(\"âœ… æ‰¹æ¬¡Aç”Ÿæˆ5å¼ ç¥¨åˆ¸\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 5,\n  \"batch_id\": \"BATCH-A-{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/bulk-generate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "bulk-generate"
              ]
            },
            "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸"
          },
          "response": []
        },
        {
          "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(201);",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.total_generated).to.eql(3);",
                  "    // ä¿å­˜ä¸€ä¸ªticket_codeç”¨äºåç»­æ¿€æ´»æµ‹è¯•",
                  "    pm.collectionVariables.set('test_ticket_for_activation', jsonData.tickets[0].ticket_code);",
                  "});",
                  "",
                  "console.log(\"âœ… æ‰¹æ¬¡Bç”Ÿæˆ3å¼ ç¥¨åˆ¸\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 107,\n  \"quantity\": 3,\n  \"batch_id\": \"BATCH-B-{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/bulk-generate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "bulk-generate"
              ]
            },
            "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸"
          },
          "response": []
        },
        {
          "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('tickets');",
                  "    pm.expect(jsonData).to.have.property('total_count');",
                  "    pm.expect(jsonData).to.have.property('page');",
                  "    pm.expect(jsonData).to.have.property('page_size');",
                  "});",
                  "",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.tickets.length > 0) {",
                  "        var ticket = jsonData.tickets[0];",
                  "        pm.expect(ticket).to.have.property('ticket_code');",
                  "        pm.expect(ticket).to.have.property('status');",
                  "        pm.expect(ticket).to.have.property('batch_id');",
                  "        pm.expect(ticket).to.have.property('product_id');",
                  "        pm.expect(ticket).to.have.property('created_at');",
                  "        pm.expect(ticket).to.have.property('activated_at');",
                  "    }",
                  "});",
                  "",
                  "console.log(\"âœ… ç¥¨åˆ¸æ€»æ•°:\", pm.response.json().total_count);",
                  "console.log(\"   å½“å‰é¡µ:\", pm.response.json().page);",
                  "console.log(\"   æ¯é¡µæ•°é‡:\", pm.response.json().page_size);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ]
            },
            "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶"
          },
          "response": []
        },
        {
          "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    jsonData.tickets.forEach(function(ticket) {",
                  "        pm.expect(ticket.status).to.eql('PRE_GENERATED');",
                  "    });",
                  "});",
                  "",
                  "console.log(\"âœ… PRE_GENERATEDç¥¨åˆ¸æ•°é‡:\", pm.response.json().total_count);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PRE_GENERATED",
                  "description": "åªæŸ¥è¯¢æœªæ¿€æ´»çš„ç¥¨åˆ¸"
                }
              ]
            },
            "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)"
          },
          "response": []
        },
        {
          "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "});",
                  "",
                  "console.log(\"âœ… ç¥¨åˆ¸å·²æ¿€æ´»,ç”¨äºåç»­æµ‹è¯•\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"æµ‹è¯•å®¢æˆ·\",\n    \"email\": \"test@example.com\",\n    \"phone\": \"+86 138 0000 0001\"\n  },\n  \"payment_reference\": \"PAY-LIST-TEST\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "{{test_ticket_for_activation}}",
                "activate"
              ]
            },
            "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤"
          },
          "response": []
        },
        {
          "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.total_count).to.be.above(0);",
                  "    jsonData.tickets.forEach(function(ticket) {",
                  "        pm.expect(ticket.status).to.eql('ACTIVE');",
                  "        pm.expect(ticket.activated_at).to.not.be.null;",
                  "        pm.expect(ticket.customer_name).to.not.be.null;",
                  "    });",
                  "});",
                  "",
                  "console.log(\"âœ… ACTIVEç¥¨åˆ¸æ•°é‡:\", pm.response.json().total_count);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?status=ACTIVE",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "åªæŸ¥è¯¢å·²æ¿€æ´»çš„ç¥¨åˆ¸"
                }
              ]
            },
            "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)"
          },
          "response": []
        },
        {
          "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.page).to.eql(1);",
                  "    pm.expect(jsonData.page_size).to.eql(2);",
                  "    pm.expect(jsonData.tickets.length).to.be.at.most(2);",
                  "});",
                  "",
                  "console.log(\"âœ… ç¬¬1é¡µ,æ¯é¡µ2æ¡:\", pm.response.json().tickets.length, \"æ¡\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?page=1&limit=2",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "é¡µç "
                },
                {
                  "key": "limit",
                  "value": "2",
                  "description": "æ¯é¡µæ•°é‡"
                }
              ]
            },
            "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡"
          },
          "response": []
        },
        {
          "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.page).to.eql(2);",
                  "    pm.expect(jsonData.page_size).to.eql(2);",
                  "});",
                  "",
                  "console.log(\"âœ… ç¬¬2é¡µ,æ¯é¡µ2æ¡:\", pm.response.json().tickets.length, \"æ¡\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?page=2&limit=2",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "2",
                  "description": "é¡µç "
                },
                {
                  "key": "limit",
                  "value": "2",
                  "description": "æ¯é¡µæ•°é‡"
                }
              ]
            },
            "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡"
          },
          "response": []
        },
        {
          "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var startDate = new Date('2025-11-01T00:00:00Z');",
                  "    var endDate = new Date('2025-12-31T23:59:59Z');",
                  "    ",
                  "    jsonData.tickets.forEach(function(ticket) {",
                  "        var createdAt = new Date(ticket.created_at);",
                  "        pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "        pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());",
                  "    });",
                  "});",
                  "",
                  "console.log(\"âœ… æ—¶é—´èŒƒå›´å†…çš„ç¥¨åˆ¸æ•°é‡:\", pm.response.json().total_count);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "created_after",
                  "value": "2025-11-01T00:00:00Z",
                  "description": "åˆ›å»ºæ—¥æœŸèµ·å§‹"
                },
                {
                  "key": "created_before",
                  "value": "2025-12-31T23:59:59Z",
                  "description": "åˆ›å»ºæ—¥æœŸç»“æŸ"
                }
              ]
            },
            "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸"
          },
          "response": []
        },
        {
          "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.page).to.eql(1);",
                  "    pm.expect(jsonData.page_size).to.eql(10);",
                  "    ",
                  "    jsonData.tickets.forEach(function(ticket) {",
                  "        pm.expect(ticket.status).to.eql('PRE_GENERATED');",
                  "    });",
                  "});",
                  "",
                  "console.log(\"âœ… ç»„åˆè¿‡æ»¤ç»“æœ:\", pm.response.json().total_count, \"å¼ PRE_GENERATEDç¥¨åˆ¸\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "PRE_GENERATED",
                  "description": "çŠ¶æ€è¿‡æ»¤"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "é¡µç "
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "æ¯é¡µæ•°é‡"
                }
              ]
            },
            "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ"
          },
          "response": []
        },
        {
          "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "    pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');",
                  "});",
                  "",
                  "console.log(\"âœ… å‚æ•°éªŒè¯ç”Ÿæ•ˆ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0",
                  "description": "æ— æ•ˆé¡µç (å¿…é¡»>=1)"
                },
                {
                  "key": "limit",
                  "value": "-5",
                  "description": "æ— æ•ˆlimit(å¿…é¡»>=1)"
                }
              ]
            },
            "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°"
          },
          "response": []
        }
      ],
      "description": "å®Œæ•´æµ‹è¯•ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢API: çŠ¶æ€è¿‡æ»¤ã€åˆ†é¡µã€æ—¶é—´èŒƒå›´ã€ç»„åˆæŸ¥è¯¢"
    },
    {
      "name": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
      "item": [
        {
          "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(201);",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('test_ticket_code', jsonData.tickets[0].ticket_code);",
                  "});",
                  "",
                  "console.log(\"âœ… æµ‹è¯•ç¥¨æ®ç :\", pm.response.json().tickets[0].ticket_code);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 107,\n  \"quantity\": 1,\n  \"batch_id\": \"TEST-{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/bulk-generate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "bulk-generate"
              ]
            },
            "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•"
          },
          "response": []
        },
        {
          "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "});",
                  "",
                  "console.log(\"âœ… ç¥¨æ®å·²æ¿€æ´»\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"æµ‹è¯•ç”¨æˆ·\",\n    \"email\": \"test@example.com\",\n    \"phone\": \"+86 138 0000 0001\"\n  },\n  \"payment_reference\": \"PAY-FIRST\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "{{test_ticket_code}}",
                "activate"
              ]
            },
            "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®"
          },
          "response": []
        },
        {
          "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "    pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');",
                  "});",
                  "",
                  "console.log(\"âœ… é‡å¤æ¿€æ´»ä¿æŠ¤ç”Ÿæ•ˆ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"é‡å¤æµ‹è¯•\",\n    \"email\": \"duplicate@example.com\",\n    \"phone\": \"+86 138 0000 9999\"\n  },\n  \"payment_reference\": \"PAY-DUPLICATE\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "{{test_ticket_code}}",
                "activate"
              ]
            },
            "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯"
          },
          "response": []
        },
        {
          "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "    pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');",
                  "});",
                  "",
                  "console.log(\"âœ… æ— æ•ˆç¥¨æ®éªŒè¯ç”Ÿæ•ˆ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"æµ‹è¯•ç”¨æˆ·\",\n    \"email\": \"test@example.com\",\n    \"phone\": \"+86 138 0000 0001\"\n  },\n  \"payment_reference\": \"PAY-TEST\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "INVALID-TICKET-CODE",
                "activate"
              ]
            },
            "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®"
          },
          "response": []
        },
        {
          "name": "3.3 åˆ›å»ºé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"é¢„è®¢åˆ›å»ºæˆåŠŸ\", function () {",
                  "    pm.response.to.have.status(201);",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('test_reservation_id', jsonData.reservation_id);",
                  "});",
                  "",
                  "console.log(\"âœ… æµ‹è¯•é¢„è®¢ID:\", pm.response.json().reservation_id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 108,\n  \"quantity\": 5\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reserve",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reserve"
              ]
            },
            "description": "åˆ›å»ºä¸€ä¸ªé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•"
          },
          "response": []
        },
        {
          "name": "3.4 å–æ¶ˆé¢„è®¢",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›204 No Content\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "console.log(\"âœ… é¢„è®¢å–æ¶ˆæˆåŠŸ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/reservations/{{test_reservation_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reservations",
                "{{test_reservation_id}}"
              ]
            },
            "description": "å–æ¶ˆé¢„è®¢ï¼Œåº“å­˜åº”è¯¥é‡Šæ”¾"
          },
          "response": []
        },
        {
          "name": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›401æœªæˆæƒ\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.eql('INVALID_API_KEY');",
                  "});",
                  "",
                  "console.log(\"âœ… API KeyéªŒè¯ç”Ÿæ•ˆ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "invalid_key_12345",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/inventory",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "inventory"
              ]
            },
            "description": "ä½¿ç”¨æ— æ•ˆAPI Keyæµ‹è¯•è®¤è¯"
          },
          "response": []
        },
        {
          "name": "3.6 æµ‹è¯•è¶…é‡é¢„è®¢ âŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "    pm.expect(jsonData.error).to.eql('VALIDATION_ERROR');",
                  "});",
                  "",
                  "console.log(\"âœ… æ•°é‡é™åˆ¶éªŒè¯ç”Ÿæ•ˆ\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 150\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reserve",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reserve"
              ]
            },
            "description": "å°è¯•é¢„è®¢è¶…è¿‡é™åˆ¶ï¼ˆ100ï¼‰çš„æ•°é‡"
          },
          "response": []
        }
      ],
      "description": "æµ‹è¯•çŠ¶æ€è½¬æ¢ã€é‡å¤æ¿€æ´»ä¿æŠ¤ã€é¢„è®¢å–æ¶ˆç­‰è¾¹ç•Œåœºæ™¯å’Œé”™è¯¯å¤„ç†"
    }
  ]
}
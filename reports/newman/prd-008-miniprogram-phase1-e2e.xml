<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="PRD-008 DeepTravel 小程序 Phase 1 - Package Booking" tests="25" time="4.074">
  <testsuite name="0. Prerequisites - Auth Setup / 0.1 WeChat Login to get Token" id="6a8ad8e8-8321-4f29-a7dc-03f888f5a29b" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.231">
    <testcase name="WeChat login requires mock mode or real WeChat code" time="0.231" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A1. Product Catalog - Direct Channel / A1.1 Get product list (default)" id="3646fee9-83da-4796-9537-a4f4d5cc1453" timestamp="2025-12-09T09:20:54.179Z" tests="5" failures="0" errors="0" time="0.356">
    <testcase name="Returns 200" time="0.356" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Returns product array" time="0.356" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Has pagination info" time="0.356" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Products have required fields" time="0.356" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Products show availability from direct channel" time="0.356" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A1. Product Catalog - Direct Channel / A1.2 Product list pagination" id="b9a89dcc-4a66-41c8-8722-56013237de8f" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="0" errors="0" time="0.337">
    <testcase name="Returns 200" time="0.337" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Respects pagination params" time="0.337" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A2. Product Detail - Package Inclusions / A2.1 Get product detail - cruise package" id="9b37f96c-9f23-4bc1-8b7d-2e80dccacc0c" timestamp="2025-12-09T09:20:54.179Z" tests="5" failures="0" errors="0" time="0.313">
    <testcase name="Returns 200" time="0.313" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Returns product detail" time="0.313" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Has pricing info" time="0.313" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Has package functions/inclusions" time="0.313" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Has availability info" time="0.313" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A2. Product Detail - Package Inclusions / A2.2 Product not found" id="3629f83b-2e09-4b57-9edd-e9f05f33aa13" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="0" errors="0" time="0.311">
    <testcase name="Returns 404" time="0.311" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Returns NOT_FOUND error" time="0.311" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A2. Product Detail - Package Inclusions / A2.3 Invalid product ID" id="5ba48e66-d56a-43e8-bf92-dc01d2bd8588" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="0" errors="0" time="0.001">
    <testcase name="Returns 400" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Returns validation error" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A3. Inventory Availability / A3.1 Check availability (default)" id="83f80ef6-1d15-40d0-84f4-56bfc29468ec" timestamp="2025-12-09T09:20:54.179Z" tests="4" failures="0" errors="0" time="0.944">
    <testcase name="Returns 200" time="0.944" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Returns availability info" time="0.944" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Availability is boolean" time="0.944" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Available count is number" time="0.944" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A3. Inventory Availability / A3.2 Check availability with quantity" id="c5631143-5b09-4653-a275-d97a367c6bed" timestamp="2025-12-09T09:20:54.179Z" tests="3" failures="0" errors="0" time="0.934">
    <testcase name="Returns 200" time="0.934" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="Checks requested quantity" time="0.934" classname="Prd008DeepTravelPhase1PackageBooking"/>
    <testcase name="is_available reflects quantity check" time="0.934" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A3. Inventory Availability / A3.3 Availability - product not found" id="15e4836b-06eb-4687-b739-831dcdcb2bfe" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.623">
    <testcase name="Returns 404" time="0.623" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A4. Order Creation (DB Required) / A4.1 Create order - success" id="a0384738-fbaa-40ee-9f64-f5ccb4a0dd08" timestamp="2025-12-09T09:20:54.179Z" tests="4" failures="4" errors="0" time="0.002">
    <testcase name="Returns 201" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected response to have status code 201 but got 401">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.1 Create order - success.]]>
        <![CDATA[Test description: Returns 201.]]>
        <![CDATA[Error message: expected response to have status code 201 but got 401.]]>
        <![CDATA[Stacktrace: AssertionError: expected response to have status code 201 but got 401
   at Object.eval sandbox-script.js:1:10).]]>
      </failure>
    </testcase>
    <testcase name="Returns order with ID" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected { code: 'INTERNAL_ERROR', …(1) } to have property 'id'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.1 Create order - success.]]>
        <![CDATA[Test description: Returns order with ID.]]>
        <![CDATA[Error message: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'id'.]]>
        <![CDATA[Stacktrace: AssertionError: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'id'
   at Object.eval sandbox-script.js:2:10).]]>
      </failure>
    </testcase>
    <testcase name="Has pricing context" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected { code: 'INTERNAL_ERROR', …(1) } to have property 'pricing_context'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.1 Create order - success.]]>
        <![CDATA[Test description: Has pricing context.]]>
        <![CDATA[Error message: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'pricing_context'.]]>
        <![CDATA[Stacktrace: AssertionError: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'pricing_context'
   at Object.eval sandbox-script.js:3:10).]]>
      </failure>
    </testcase>
    <testcase name="Total calculated correctly" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="Cannot read properties of undefined (reading 'subtotal')">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.1 Create order - success.]]>
        <![CDATA[Test description: Total calculated correctly.]]>
        <![CDATA[Error message: Cannot read properties of undefined (reading 'subtotal').]]>
        <![CDATA[Stacktrace: TypeError: Cannot read properties of undefined (reading 'subtotal')
   at Object.eval sandbox-script.js:4:10).]]>
      </failure>
    </testcase>
  </testsuite>
  <testsuite name="A4. Order Creation (DB Required) / A4.2 Error - missing order_no" id="7dcee8c4-27c2-4f3d-ab89-0674a11d03a8" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="2" errors="0" time="0.002">
    <testcase name="Returns 400" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected response to have status code 400 but got 401">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.2 Error - missing order_no.]]>
        <![CDATA[Test description: Returns 400.]]>
        <![CDATA[Error message: expected response to have status code 400 but got 401.]]>
        <![CDATA[Stacktrace: AssertionError: expected response to have status code 400 but got 401
   at Object.eval sandbox-script.js:1:11).]]>
      </failure>
    </testcase>
    <testcase name="Returns INVALID_REQUEST" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.2 Error - missing order_no.]]>
        <![CDATA[Test description: Returns INVALID_REQUEST.]]>
        <![CDATA[Error message: expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'.]]>
        <![CDATA[Stacktrace: AssertionError: expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'
   at Object.eval sandbox-script.js:2:11).]]>
      </failure>
    </testcase>
  </testsuite>
  <testsuite name="A4. Order Creation (DB Required) / A4.3 Error - invalid customer type" id="bf3c1ffb-c697-48df-9cbd-fc849d1dd69d" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="2" errors="0" time="0.001">
    <testcase name="Returns 400" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected response to have status code 400 but got 401">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.3 Error - invalid customer type.]]>
        <![CDATA[Test description: Returns 400.]]>
        <![CDATA[Error message: expected response to have status code 400 but got 401.]]>
        <![CDATA[Stacktrace: AssertionError: expected response to have status code 400 but got 401
   at Object.eval sandbox-script.js:1:12).]]>
      </failure>
    </testcase>
    <testcase name="Returns INVALID_REQUEST" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A4. Order Creation (DB Required) / A4.3 Error - invalid customer type.]]>
        <![CDATA[Test description: Returns INVALID_REQUEST.]]>
        <![CDATA[Error message: expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'.]]>
        <![CDATA[Stacktrace: AssertionError: expected 'INTERNAL_ERROR' to equal 'INVALID_REQUEST'
   at Object.eval sandbox-script.js:2:12).]]>
      </failure>
    </testcase>
  </testsuite>
  <testsuite name="A4. Order Creation (DB Required) / A4.4 Error - unauthorized" id="15d5cdc0-e963-4169-9d31-135c6be773e9" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.002">
    <testcase name="Returns 401" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A5. Order Management (DB Required) / A5.1 Get order list" id="375584c7-ee85-4a1e-9b34-535b9c5d9cea" timestamp="2025-12-09T09:20:54.179Z" tests="3" failures="3" errors="0" time="0.002">
    <testcase name="Returns 200" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected response to have status code 200 but got 401">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A5. Order Management (DB Required) / A5.1 Get order list.]]>
        <![CDATA[Test description: Returns 200.]]>
        <![CDATA[Error message: expected response to have status code 200 but got 401.]]>
        <![CDATA[Stacktrace: AssertionError: expected response to have status code 200 but got 401
   at Object.eval sandbox-script.js:1:14).]]>
      </failure>
    </testcase>
    <testcase name="Returns orders array" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected { code: 'INTERNAL_ERROR', …(1) } to have property 'orders'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A5. Order Management (DB Required) / A5.1 Get order list.]]>
        <![CDATA[Test description: Returns orders array.]]>
        <![CDATA[Error message: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'orders'.]]>
        <![CDATA[Stacktrace: AssertionError: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'orders'
   at Object.eval sandbox-script.js:2:14).]]>
      </failure>
    </testcase>
    <testcase name="Has pagination info" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected { code: 'INTERNAL_ERROR', …(1) } to have property 'total'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A5. Order Management (DB Required) / A5.1 Get order list.]]>
        <![CDATA[Test description: Has pagination info.]]>
        <![CDATA[Error message: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'total'.]]>
        <![CDATA[Stacktrace: AssertionError: expected { code: 'INTERNAL_ERROR', …(1) } to have property 'total'
   at Object.eval sandbox-script.js:3:14).]]>
      </failure>
    </testcase>
  </testsuite>
  <testsuite name="A5. Order Management (DB Required) / A5.2 Get order detail" id="b921cabd-df9a-464e-aa26-b5e6d3660dbf" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="No order created to test detail" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A5. Order Management (DB Required) / A5.3 Error - unauthorized" id="83a8070c-d5fb-4357-9e57-b8695915a852" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="Returns 401" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A6. Simulate Payment (DB Required) / A6.1 Simulate payment - success" id="cd6849d2-939a-4710-a1a7-54389fda51bf" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="No order created to test payment" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A6. Simulate Payment (DB Required) / A6.2 Error - order not found" id="49e5cc91-49b4-47dc-8b5a-0a10c9e8b851" timestamp="2025-12-09T09:20:54.179Z" tests="2" failures="2" errors="0" time="0.001">
    <testcase name="Returns 404" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected response to have status code 404 but got 401">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A6. Simulate Payment (DB Required) / A6.2 Error - order not found.]]>
        <![CDATA[Test description: Returns 404.]]>
        <![CDATA[Error message: expected response to have status code 404 but got 401.]]>
        <![CDATA[Stacktrace: AssertionError: expected response to have status code 404 but got 401
   at Object.eval sandbox-script.js:1:18).]]>
      </failure>
    </testcase>
    <testcase name="Returns ORDER_NOT_FOUND" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking">
      <failure type="AssertionFailure" message="expected 'INTERNAL_ERROR' to equal 'ORDER_NOT_FOUND'">
        <![CDATA[Failed 1 times.]]>
        <![CDATA[Collection JSON ID: prd-008-miniprogram-phase1.]]>
        <![CDATA[Collection name: PRD-008 DeepTravel 小程序 Phase 1 - Package Booking.]]>
        <![CDATA[Request name: A6. Simulate Payment (DB Required) / A6.2 Error - order not found.]]>
        <![CDATA[Test description: Returns ORDER_NOT_FOUND.]]>
        <![CDATA[Error message: expected 'INTERNAL_ERROR' to equal 'ORDER_NOT_FOUND'.]]>
        <![CDATA[Stacktrace: AssertionError: expected 'INTERNAL_ERROR' to equal 'ORDER_NOT_FOUND'
   at Object.eval sandbox-script.js:2:18).]]>
      </failure>
    </testcase>
  </testsuite>
  <testsuite name="A6. Simulate Payment (DB Required) / A6.3 Error - already paid (invalid status)" id="64494b66-b0bb-416f-8711-93e20ed35471" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="No order to test" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A6. Simulate Payment (DB Required) / A6.4 Error - unauthorized" id="d68d94ec-6339-436c-8299-19df7d607a55" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="Returns 401" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A7. Ticket QR Generation (DB Required) / A7.1 Generate QR - success (default expiry)" id="a55268e8-f799-4bfa-8f75-01edac87093e" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.001">
    <testcase name="No ticket available for QR test" time="0.001" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A7. Ticket QR Generation (DB Required) / A7.2 Generate QR - custom expiry (60 min)" id="d96c7748-7471-47a6-b65b-e1e58d8e8b12" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.002">
    <testcase name="No ticket available for QR test" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A7. Ticket QR Generation (DB Required) / A7.3 Error - ticket not found" id="2935d859-4f9e-4274-9cd0-f18dce309337" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.002">
    <testcase name="Requires valid auth token - WeChat login may have failed" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A7. Ticket QR Generation (DB Required) / A7.4 Error - invalid expiry" id="8f95fe9a-fdaa-4ad0-94e0-290d6fd23db2" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.002">
    <testcase name="Requires valid auth token - WeChat login may have failed" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
  <testsuite name="A7. Ticket QR Generation (DB Required) / A7.5 Error - unauthorized" id="a55ba153-ac87-451f-9a0a-5628121f7848" timestamp="2025-12-09T09:20:54.179Z" tests="1" failures="0" errors="0" time="0.002">
    <testcase name="Returns 401" time="0.002" classname="Prd008DeepTravelPhase1PackageBooking"/>
  </testsuite>
</testsuites>
{
  "timestamp": "2025-11-14T17:06:53.154Z",
  "prdFiles": [
    "PRD-001-cruise-ticketing-platform.md",
    "PRD-002-ota-platform-integration.md",
    "PRD-003-event-venue-operations.md",
    "PRD-004-wechat-miniprogram-auth.md"
  ],
  "newmanCollections": [
    "ai-generated-tests.postman_collection.json",
    "coverage-report.json",
    "requirements-analysis.json",
    "special-pricing-override.postman_collection.json",
    "ticket-activation-complete-coverage.postman_collection.json",
    "us-012-complete-coverage.postman_collection.json",
    "us-010a-traveler-loop.json",
    "us-010b-operations-backbone.json",
    "us-012-ota-integration.json",
    "us-013-venue-operations.json"
  ],
  "scenario_analysis": {
    "PRD-001-cruise-ticketing-platform": {
      "scenarios_discovered": [],
      "covered_scenarios": [],
      "uncovered_scenarios": []
    },
    "PRD-002-ota-platform-integration": {
      "scenarios_discovered": [
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-1",
          "text": "ticket validity by scanning QR code within WeChat",
          "section": "Core Features",
          "line": 200,
          "type": "User Flow",
          "original_line": "- **User Value**: Users can verify ticket validity by scanning QR code within WeChat"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-2",
          "text": "OTA allocations appear",
          "section": "Initial Inventory Allocation (System Setup)",
          "line": 268,
          "type": "API Test",
          "original_line": "- GET /api/ota/inventory â†’ Verify OTA allocations appear"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-3",
          "text": "inventory decrements",
          "section": "Initial Inventory Allocation (System Setup)",
          "line": 270,
          "type": "General Test",
          "original_line": "- Test: Create reservation to ensure inventory decrements"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-4",
          "text": "QR code for WeChat users",
          "section": "QR Code Generation *(NEW - Phase 4)*",
          "line": 715,
          "type": "User Flow",
          "original_line": "summary: Verify QR code for WeChat users"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-5",
          "text": "& Generate Tickets",
          "section": "Pre-Made Ticket Sequence Diagram",
          "line": 766,
          "type": "API Test",
          "original_line": "API->>Service: Validate & Generate Tickets"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-6",
          "text": "Active Ticket",
          "section": "Pre-Made Ticket Sequence Diagram",
          "line": 795,
          "type": "Validation",
          "original_line": "Store->>Store: Validate Active Ticket"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-7",
          "text": "Available Inventory",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 837,
          "type": "Validation",
          "original_line": "Step 1: Verify Available Inventory"
        },
        {
          "id": "PRD-002-ota-platform-integration-TEST-8",
          "text": "Customer\",",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 868,
          "type": "Test Requirement",
          "original_line": "\"name\": \"Test Customer\","
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-9",
          "text": "Order Creation",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 876,
          "type": "Validation",
          "original_line": "Step 4: Verify Order Creation"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-10",
          "text": "QR Code Access",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 881,
          "type": "Validation",
          "original_line": "Step 5: Verify QR Code Access"
        },
        {
          "id": "PRD-002-ota-platform-integration-TEST-11",
          "text": "Scenarios:",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 886,
          "type": "Test Requirement",
          "original_line": "Test Scenarios:"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-12",
          "text": "pricing_snapshot locked-in",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 891,
          "type": "Validation",
          "original_line": "- Special pricing override: Generate batch with custom pricing â†’ Verify pricing_snapshot locked-in"
        }
      ],
      "covered_scenarios": [
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-1",
            "text": "ticket validity by scanning QR code within WeChat",
            "section": "Core Features",
            "line": 200,
            "type": "User Flow",
            "original_line": "- **User Value**: Users can verify ticket validity by scanning QR code within WeChat"
          },
          "tests": [
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "6. å¾®ä¿¡é¢„ä¸‹å•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "6. å¾®ä¿¡é¢„ä¸‹å•",
                "method": "POST",
                "url": "{{baseUrl}}/payments/wechat/session",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "9. æŸ¥è¯¢ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "9. æŸ¥è¯¢ç¥¨åˆ¸",
                "method": "GET",
                "url": "{{baseUrl}}/my/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›ç¥¨åˆ¸ä¸”éç©º', () => pm.expect(json).to.have.property('tickets').that.is.an('array').that.is.not.empty);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-2",
            "text": "OTA allocations appear",
            "section": "Initial Inventory Allocation (System Setup)",
            "line": 268,
            "type": "API Test",
            "original_line": "- GET /api/ota/inventory â†’ Verify OTA allocations appear"
          },
          "tests": [
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Creates Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Creates Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A can create reservation\", function() {",
                  "pm.test(\"Reservation ID returned\", function() {",
                  "pm.expect(json).to.have.property(\"reservation_id\");",
                  "pm.test(\"Pricing snapshot included\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner B Cannot Access Partner A Reservations",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner B Cannot Access Partner A Reservations",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B cannot see Partner A reservations\", function() {",
                  "pm.expect(foundReservation).to.be.undefined;",
                  "pm.test(\"Partner isolation maintained\", function() {",
                  "pm.expect(json).to.have.property(\"reservations\");",
                  "pm.expect(json.reservations).to.be.an(\"array\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Shared Inventory Visibility",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Shared Inventory Visibility",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Both partners see same inventory pool\", function() {",
                  "pm.expect(partnerBInventory).to.be.a(\"number\");",
                  "pm.test(\"Channel allocation working\", function() {",
                  "pm.expect(json).to.have.property(\"available_quantities\");",
                  "pm.expect(json.available_quantities).to.have.property(\"106\");",
                  "pm.expect(json.available_quantities).to.have.property(\"107\");",
                  "pm.expect(json.available_quantities).to.have.property(\"108\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Inventory After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Inventory After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A sees reduced inventory after reservation\", function() {",
                  "pm.expect(partnerAInventory).to.equal(partnerBInventory);",
                  "pm.test(\"Inventory reflects reservation impact\", function() {",
                  "pm.expect(currentInventory).to.be.a(\"number\");",
                  "pm.expect(currentInventory).to.be.at.least(0);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 4: Batch Analytics with Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Batch Analytics with Special Pricing",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/{{special_batch_id}}/analytics",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Analytics includes special pricing information', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.test('Campaign metrics tracked correctly', function () {",
                  "pm.expect(response.campaign_info).to.exist;",
                  "pm.expect(response.campaign_info.campaign_type).to.equal('flash_sale');",
                  "pm.expect(response.campaign_info.promotional_code).to.equal('FLASH25');",
                  "pm.test('Batch performance metrics available', function () {",
                  "pm.expect(response.total_tickets).to.be.a('number');",
                  "pm.expect(response.activated_tickets).to.be.a('number');",
                  "pm.expect(response.activation_rate).to.be.a('number');",
                  "pm.expect(response.activated_tickets).to.be.at.least(1);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 8: Batch Analytics After Activation - Performance Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 8: Batch Analytics After Activation - Performance Tracking",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/{{test_batch_id}}/analytics",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activation metrics updated correctly', function () {",
                  "pm.expect(response.tickets_activated).to.be.at.least(2); // At least 2 tickets activated",
                  "pm.expect(response.tickets_generated).to.be.at.least(3); // 3 tickets generated in setup",
                  "pm.test('Conversion rates calculated', function () {",
                  "pm.expect(response.conversion_rates).to.exist;",
                  "pm.expect(response.conversion_rates.activation_rate).to.be.above(0);",
                  "pm.expect(response.conversion_rates.activation_rate).to.be.at.most(1);",
                  "pm.test('Revenue metrics reflect special pricing', function () {",
                  "pm.expect(response.revenue_metrics).to.exist;",
                  "pm.expect(response.revenue_metrics.potential_revenue).to.be.above(0);",
                  "pm.expect(response.wholesale_rate).to.equal(275); // Special pricing base",
                  "pm.test('Batch tracking complete', function () {",
                  "pm.expect(response.batch_id).to.equal(pm.collectionVariables.get('test_batch_id'));",
                  "pm.expect(response.generated_at).to.exist;"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Get Inventory - Initial State",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Get Inventory - Initial State",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Response time under 2 seconds (Performance Requirement)\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Status code is 200\", function() {",
                  "pm.test(\"Channel Allocation: Product 106 ~2000 units\", function() {",
                  "pm.expect(product106).to.be.a(\"number\");",
                  "pm.expect(product106).to.be.at.least(1500);",
                  "pm.expect(product106).to.be.at.most(2500);",
                  "pm.test(\"Channel Allocation: Product 107 ~1500 units\", function() {",
                  "pm.expect(product107).to.be.a(\"number\");",
                  "pm.expect(product107).to.be.at.least(1000);",
                  "pm.expect(product107).to.be.at.most(2000);",
                  "pm.test(\"Channel Allocation: Product 108 ~1500 units\", function() {",
                  "pm.expect(product108).to.be.a(\"number\");",
                  "pm.expect(product108).to.be.at.least(1000);",
                  "pm.expect(product108).to.be.at.most(2000);",
                  "pm.test(\"Pricing context includes customer discounts\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_context\");",
                  "pm.expect(json.pricing_context).to.have.property(\"customer_discounts\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Get Same Inventory View",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Get Same Inventory View",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees identical inventory (Shared Pool)\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(initialInventory));",
                  "pm.test(\"Response time under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Create Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Create Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Reservation created successfully\", function() {",
                  "pm.test(\"Reservation ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"reservation_id\");",
                  "pm.test(\"Expiry time is 24 hours from now\", function() {",
                  "pm.expect(json).to.have.property(\"reserved_until\");",
                  "pm.expect(diffHours).to.be.closeTo(24, 1);",
                  "pm.test(\"Pricing snapshot captured\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"base_price\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Verify Inventory Decreased After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Verify Inventory Decreased After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Inventory decreased by reserved amount\", function() {",
                  "pm.expect(decrease).to.equal(10);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Cannot Access Partner A's Reservations",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Cannot Access Partner A's Reservations",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B cannot see Partner A's reservations\", function() {",
                  "pm.expect(foundReservation).to.be.undefined;",
                  "pm.test(\"Partner B has own reservations list\", function() {",
                  "pm.expect(json).to.have.property(\"reservations\");",
                  "pm.expect(json.reservations).to.be.an(\"array\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Sees Same Reduced Inventory",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Sees Same Reduced Inventory",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees same inventory reduction\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(afterReserveInventory));",
                  "pm.test(\"Shared inventory pool working correctly\", function() {"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Create Order from Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Create Order from Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order created from reservation\", function() {",
                  "pm.test(\"Order ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"order_id\");",
                  "pm.test(\"Payment required amount specified\", function() {",
                  "pm.expect(json).to.have.property(\"payment_required\");",
                  "pm.expect(json.payment_required).to.be.a(\"number\");",
                  "pm.expect(json.payment_required).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Activate Order After Payment",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Activate Order After Payment",
                "method": "POST",
                "url": "{{base_url}}/api/ota/activate",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order activated successfully\", function() {",
                  "pm.test(\"Tickets issued with QR codes\", function() {",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket).to.have.property(\"ticket_code\");",
                  "pm.expect(ticket).to.have.property(\"qr_code\");",
                  "pm.expect(ticket.status).to.equal(\"ACTIVE\");",
                  "pm.test(\"Activation status is success\", function() {",
                  "pm.expect(json.activation_status).to.equal(\"success\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Invalid API Key - Unauthorized",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Invalid API Key - Unauthorized",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Invalid API key rejected\", function() {",
                  "pm.test(\"Proper error message\", function() {",
                  "pm.expect(json.error).to.equal(\"INVALID_API_KEY\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Overselling Prevention",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Overselling Prevention",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Overselling attempt prevented\", function() {",
                  "pm.test(\"Insufficient inventory error\", function() {",
                  "pm.expect(json.error).to.equal(\"INSUFFICIENT_INVENTORY\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "5000 Unit Allocation Verification",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5000 Unit Allocation Verification",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "7. Performance & Scale Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Total OTA allocation meets 5000 unit requirement\", function() {",
                  "pm.expect(total).to.be.at.least(4500);",
                  "pm.expect(total).to.be.at.most(5500);",
                  "pm.test(\"Performance: Response under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Business requirement: Nov 15 deadline readiness\", function() {",
                  "pm.expect(today).to.be.below(deadline);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.0 æŸ¥è¯¢äº§å“ç›®å½• ğŸ“¦",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.0 æŸ¥è¯¢äº§å“ç›®å½• ğŸ“¦",
                "method": "GET",
                "url": "{{base_url}}/api/ota/products?product_ids=106,107,108",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAå¯å”®äº§å“ç›®å½•ï¼ŒåŒ…å«äº§å“è¯¦æƒ…ã€åŠŸèƒ½entitlementså’Œæ¸ é“åº“å­˜åˆ†é…",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›äº§å“åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('products');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.products.length).to.be.above(0);",
                  "pm.test(\"äº§å“åŒ…å«å®Œæ•´ä¿¡æ¯\", function () {",
                  "pm.expect(product).to.have.property('product_id');",
                  "pm.expect(product).to.have.property('name');",
                  "pm.expect(product).to.have.property('sku');",
                  "pm.expect(product).to.have.property('unit_price');",
                  "pm.expect(product).to.have.property('functions');",
                  "pm.expect(product).to.have.property('channel_allocations');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.1 æŸ¥è¯¢OTAåº“å­˜",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.1 æŸ¥è¯¢OTAåº“å­˜",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAæ¸ é“å¯ç”¨çš„åº“å­˜æ•°é‡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›åº“å­˜æ•°æ®\", function () {",
                  "pm.expect(jsonData).to.have.property('available_quantities');",
                  "pm.expect(jsonData.available_quantities).to.have.property('106');",
                  "pm.expect(jsonData.available_quantities).to.have.property('107');",
                  "pm.expect(jsonData.available_quantities).to.have.property('108');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.2 åˆ›å»ºé¢„è®¢",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.2 åˆ›å»ºé¢„è®¢",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPremium Planåˆ›å»º25ä¸ªå•ä½çš„é¢„è®¢",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"è¿”å›é¢„è®¢ID\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');",
                  "pm.expect(jsonData).to.have.property('reserved_until');",
                  "pm.expect(jsonData).to.have.property('pricing_snapshot');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.3 æŸ¥è¯¢é¢„è®¢è¯¦æƒ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.3 æŸ¥è¯¢é¢„è®¢è¯¦æƒ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations/{{reservation_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢åˆšåˆ›å»ºçš„é¢„è®¢è¯¦æƒ…",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"é¢„è®¢çŠ¶æ€ä¸ºactive\", function () {",
                  "pm.expect(jsonData.status).to.eql('active');",
                  "pm.expect(jsonData.product_id).to.eql(106);",
                  "pm.expect(jsonData.quantity).to.eql(25);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.4 æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸ â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.4 æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸ â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reservations/{{reservation_id}}/activate",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„è®¢ï¼Œç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"è®¢å•åˆ›å»ºæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"ç”Ÿæˆäº†25å¼ ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.tickets).to.have.lengthOf(25);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«entitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢æ‰€æœ‰OTAè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('orders');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.orders.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢å•ä¸ªè®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬å®¢æˆ·ä¿¡æ¯ã€é‡‘é¢ã€çŠ¶æ€å’Œé¢„è®¢å…³è”",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•è¯¦æƒ…\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('product_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('customer_email');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"è®¢å•åŒ…å«é¢„è®¢å…³è”\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 åˆ›å»ºé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 åˆ›å»ºé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "åˆ›å»ºä¸€ä¸ªé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
                "tests": [
                  "pm.test(\"é¢„è®¢åˆ›å»ºæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 å–æ¶ˆé¢„è®¢",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 å–æ¶ˆé¢„è®¢",
                "method": "DELETE",
                "url": "{{base_url}}/api/ota/reservations/{{test_reservation_id}}",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å–æ¶ˆé¢„è®¢ï¼Œåº“å­˜åº”è¯¥é‡Šæ”¾",
                "tests": [
                  "pm.test(\"è¿”å›204 No Content\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ä½¿ç”¨æ— æ•ˆAPI Keyæµ‹è¯•è®¤è¯",
                "tests": [
                  "pm.test(\"è¿”å›401æœªæˆæƒ\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData.error).to.eql('INVALID_API_KEY');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æµ‹è¯•è¶…é‡é¢„è®¢ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æµ‹è¯•è¶…é‡é¢„è®¢ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•é¢„è®¢è¶…è¿‡é™åˆ¶ï¼ˆ100ï¼‰çš„æ•°é‡",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('VALIDATION_ERROR');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-3",
            "text": "inventory decrements",
            "section": "Initial Inventory Allocation (System Setup)",
            "line": 270,
            "type": "General Test",
            "original_line": "- Test: Create reservation to ensure inventory decrements"
          },
          "tests": [
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Shared Inventory Visibility",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Shared Inventory Visibility",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Both partners see same inventory pool\", function() {",
                  "pm.expect(partnerBInventory).to.be.a(\"number\");",
                  "pm.test(\"Channel allocation working\", function() {",
                  "pm.expect(json).to.have.property(\"available_quantities\");",
                  "pm.expect(json.available_quantities).to.have.property(\"106\");",
                  "pm.expect(json.available_quantities).to.have.property(\"107\");",
                  "pm.expect(json.available_quantities).to.have.property(\"108\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Inventory After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Inventory After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A sees reduced inventory after reservation\", function() {",
                  "pm.expect(partnerAInventory).to.equal(partnerBInventory);",
                  "pm.test(\"Inventory reflects reservation impact\", function() {",
                  "pm.expect(currentInventory).to.be.a(\"number\");",
                  "pm.expect(currentInventory).to.be.at.least(0);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Get Inventory - Initial State",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Get Inventory - Initial State",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Response time under 2 seconds (Performance Requirement)\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Status code is 200\", function() {",
                  "pm.test(\"Channel Allocation: Product 106 ~2000 units\", function() {",
                  "pm.expect(product106).to.be.a(\"number\");",
                  "pm.expect(product106).to.be.at.least(1500);",
                  "pm.expect(product106).to.be.at.most(2500);",
                  "pm.test(\"Channel Allocation: Product 107 ~1500 units\", function() {",
                  "pm.expect(product107).to.be.a(\"number\");",
                  "pm.expect(product107).to.be.at.least(1000);",
                  "pm.expect(product107).to.be.at.most(2000);",
                  "pm.test(\"Channel Allocation: Product 108 ~1500 units\", function() {",
                  "pm.expect(product108).to.be.a(\"number\");",
                  "pm.expect(product108).to.be.at.least(1000);",
                  "pm.expect(product108).to.be.at.most(2000);",
                  "pm.test(\"Pricing context includes customer discounts\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_context\");",
                  "pm.expect(json.pricing_context).to.have.property(\"customer_discounts\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Get Same Inventory View",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Get Same Inventory View",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees identical inventory (Shared Pool)\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(initialInventory));",
                  "pm.test(\"Response time under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Verify Inventory Decreased After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Verify Inventory Decreased After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Inventory decreased by reserved amount\", function() {",
                  "pm.expect(decrease).to.equal(10);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Sees Same Reduced Inventory",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Sees Same Reduced Inventory",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees same inventory reduction\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(afterReserveInventory));",
                  "pm.test(\"Shared inventory pool working correctly\", function() {"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Invalid API Key - Unauthorized",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Invalid API Key - Unauthorized",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Invalid API key rejected\", function() {",
                  "pm.test(\"Proper error message\", function() {",
                  "pm.expect(json.error).to.equal(\"INVALID_API_KEY\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "5000 Unit Allocation Verification",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5000 Unit Allocation Verification",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "7. Performance & Scale Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Total OTA allocation meets 5000 unit requirement\", function() {",
                  "pm.expect(total).to.be.at.least(4500);",
                  "pm.expect(total).to.be.at.most(5500);",
                  "pm.test(\"Performance: Response under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Business requirement: Nov 15 deadline readiness\", function() {",
                  "pm.expect(today).to.be.below(deadline);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.1 æŸ¥è¯¢OTAåº“å­˜",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.1 æŸ¥è¯¢OTAåº“å­˜",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAæ¸ é“å¯ç”¨çš„åº“å­˜æ•°é‡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›åº“å­˜æ•°æ®\", function () {",
                  "pm.expect(jsonData).to.have.property('available_quantities');",
                  "pm.expect(jsonData.available_quantities).to.have.property('106');",
                  "pm.expect(jsonData.available_quantities).to.have.property('107');",
                  "pm.expect(jsonData.available_quantities).to.have.property('108');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ä½¿ç”¨æ— æ•ˆAPI Keyæµ‹è¯•è®¤è¯",
                "tests": [
                  "pm.test(\"è¿”å›401æœªæˆæƒ\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData.error).to.eql('INVALID_API_KEY');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-4",
            "text": "QR code for WeChat users",
            "section": "QR Code Generation *(NEW - Phase 4)*",
            "line": 715,
            "type": "User Flow",
            "original_line": "summary: Verify QR code for WeChat users"
          },
          "tests": [
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "6. å¾®ä¿¡é¢„ä¸‹å•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "6. å¾®ä¿¡é¢„ä¸‹å•",
                "method": "POST",
                "url": "{{baseUrl}}/payments/wechat/session",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-5",
            "text": "& Generate Tickets",
            "section": "Pre-Made Ticket Sequence Diagram",
            "line": 766,
            "type": "API Test",
            "original_line": "API->>Service: Validate & Generate Tickets"
          },
          "tests": [
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "9. æŸ¥è¯¢ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "9. æŸ¥è¯¢ç¥¨åˆ¸",
                "method": "GET",
                "url": "{{baseUrl}}/my/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›ç¥¨åˆ¸ä¸”éç©º', () => pm.expect(json).to.have.property('tickets').that.is.an('array').that.is.not.empty);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-6",
            "text": "Active Ticket",
            "section": "Pre-Made Ticket Sequence Diagram",
            "line": 795,
            "type": "Validation",
            "original_line": "Store->>Store: Validate Active Ticket"
          },
          "tests": [
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "9. æŸ¥è¯¢ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "9. æŸ¥è¯¢ç¥¨åˆ¸",
                "method": "GET",
                "url": "{{baseUrl}}/my/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›ç¥¨åˆ¸ä¸”éç©º', () => pm.expect(json).to.have.property('tickets').that.is.an('array').that.is.not.empty);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-7",
            "text": "Available Inventory",
            "section": "End-to-End Pre-Made Ticket Flow",
            "line": 837,
            "type": "Validation",
            "original_line": "Step 1: Verify Available Inventory"
          },
          "tests": [
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Shared Inventory Visibility",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Shared Inventory Visibility",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Both partners see same inventory pool\", function() {",
                  "pm.expect(partnerBInventory).to.be.a(\"number\");",
                  "pm.test(\"Channel allocation working\", function() {",
                  "pm.expect(json).to.have.property(\"available_quantities\");",
                  "pm.expect(json.available_quantities).to.have.property(\"106\");",
                  "pm.expect(json.available_quantities).to.have.property(\"107\");",
                  "pm.expect(json.available_quantities).to.have.property(\"108\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Inventory After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Inventory After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A sees reduced inventory after reservation\", function() {",
                  "pm.expect(partnerAInventory).to.equal(partnerBInventory);",
                  "pm.test(\"Inventory reflects reservation impact\", function() {",
                  "pm.expect(currentInventory).to.be.a(\"number\");",
                  "pm.expect(currentInventory).to.be.at.least(0);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Get Inventory - Initial State",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Get Inventory - Initial State",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Response time under 2 seconds (Performance Requirement)\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Status code is 200\", function() {",
                  "pm.test(\"Channel Allocation: Product 106 ~2000 units\", function() {",
                  "pm.expect(product106).to.be.a(\"number\");",
                  "pm.expect(product106).to.be.at.least(1500);",
                  "pm.expect(product106).to.be.at.most(2500);",
                  "pm.test(\"Channel Allocation: Product 107 ~1500 units\", function() {",
                  "pm.expect(product107).to.be.a(\"number\");",
                  "pm.expect(product107).to.be.at.least(1000);",
                  "pm.expect(product107).to.be.at.most(2000);",
                  "pm.test(\"Channel Allocation: Product 108 ~1500 units\", function() {",
                  "pm.expect(product108).to.be.a(\"number\");",
                  "pm.expect(product108).to.be.at.least(1000);",
                  "pm.expect(product108).to.be.at.most(2000);",
                  "pm.test(\"Pricing context includes customer discounts\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_context\");",
                  "pm.expect(json.pricing_context).to.have.property(\"customer_discounts\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Get Same Inventory View",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Get Same Inventory View",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees identical inventory (Shared Pool)\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(initialInventory));",
                  "pm.test(\"Response time under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Verify Inventory Decreased After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Verify Inventory Decreased After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Inventory decreased by reserved amount\", function() {",
                  "pm.expect(decrease).to.equal(10);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Sees Same Reduced Inventory",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Sees Same Reduced Inventory",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees same inventory reduction\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(afterReserveInventory));",
                  "pm.test(\"Shared inventory pool working correctly\", function() {"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Invalid API Key - Unauthorized",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Invalid API Key - Unauthorized",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Invalid API key rejected\", function() {",
                  "pm.test(\"Proper error message\", function() {",
                  "pm.expect(json.error).to.equal(\"INVALID_API_KEY\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "5000 Unit Allocation Verification",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5000 Unit Allocation Verification",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "7. Performance & Scale Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Total OTA allocation meets 5000 unit requirement\", function() {",
                  "pm.expect(total).to.be.at.least(4500);",
                  "pm.expect(total).to.be.at.most(5500);",
                  "pm.test(\"Performance: Response under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Business requirement: Nov 15 deadline readiness\", function() {",
                  "pm.expect(today).to.be.below(deadline);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.1 æŸ¥è¯¢OTAåº“å­˜",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.1 æŸ¥è¯¢OTAåº“å­˜",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAæ¸ é“å¯ç”¨çš„åº“å­˜æ•°é‡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›åº“å­˜æ•°æ®\", function () {",
                  "pm.expect(jsonData).to.have.property('available_quantities');",
                  "pm.expect(jsonData.available_quantities).to.have.property('106');",
                  "pm.expect(jsonData.available_quantities).to.have.property('107');",
                  "pm.expect(jsonData.available_quantities).to.have.property('108');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ä½¿ç”¨æ— æ•ˆAPI Keyæµ‹è¯•è®¤è¯",
                "tests": [
                  "pm.test(\"è¿”å›401æœªæˆæƒ\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData.error).to.eql('INVALID_API_KEY');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-9",
            "text": "Order Creation",
            "section": "End-to-End Pre-Made Ticket Flow",
            "line": 876,
            "type": "Validation",
            "original_line": "Step 4: Verify Order Creation"
          },
          "tests": [
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Create Order from Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Create Order from Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order created from reservation\", function() {",
                  "pm.test(\"Order ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"order_id\");",
                  "pm.test(\"Payment required amount specified\", function() {",
                  "pm.expect(json).to.have.property(\"payment_required\");",
                  "pm.expect(json.payment_required).to.be.a(\"number\");",
                  "pm.expect(json.payment_required).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "5. åˆ›å»ºè®¢å•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5. åˆ›å»ºè®¢å•",
                "method": "POST",
                "url": "{{baseUrl}}/orders",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢æ‰€æœ‰OTAè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('orders');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.orders.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢å•ä¸ªè®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬å®¢æˆ·ä¿¡æ¯ã€é‡‘é¢ã€çŠ¶æ€å’Œé¢„è®¢å…³è”",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•è¯¦æƒ…\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('product_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('customer_email');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"è®¢å•åŒ…å«é¢„è®¢å…³è”\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-002-ota-platform-integration-SCENARIO-10",
            "text": "QR Code Access",
            "section": "End-to-End Pre-Made Ticket Flow",
            "line": 881,
            "type": "Validation",
            "original_line": "Step 5: Verify QR Code Access"
          },
          "tests": [
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            }
          ]
        }
      ],
      "uncovered_scenarios": [
        {
          "id": "PRD-002-ota-platform-integration-TEST-8",
          "text": "Customer\",",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 868,
          "type": "Test Requirement",
          "original_line": "\"name\": \"Test Customer\","
        },
        {
          "id": "PRD-002-ota-platform-integration-TEST-11",
          "text": "Scenarios:",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 886,
          "type": "Test Requirement",
          "original_line": "Test Scenarios:"
        },
        {
          "id": "PRD-002-ota-platform-integration-SCENARIO-12",
          "text": "pricing_snapshot locked-in",
          "section": "End-to-End Pre-Made Ticket Flow",
          "line": 891,
          "type": "Validation",
          "original_line": "- Special pricing override: Generate batch with custom pricing â†’ Verify pricing_snapshot locked-in"
        }
      ]
    },
    "PRD-003-event-venue-operations": {
      "scenarios_discovered": [
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-1",
          "text": "tickets",
          "section": "Risk: Network Connectivity Disruption",
          "line": 393,
          "type": "Validation",
          "original_line": "**Impact**: Operators unable to validate tickets"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-2",
          "text": "environment can be configured (database mode + multiple operators)",
          "section": "Pre-Implementation Checklist",
          "line": 556,
          "type": "Test Requirement",
          "original_line": "- [x] Test environment can be configured (database mode + multiple operators)"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-3",
          "text": "data can be generated (Premium Plan orders via US-001 flow)",
          "section": "Pre-Implementation Checklist",
          "line": 557,
          "type": "Test Requirement",
          "original_line": "- [x] Test data can be generated (Premium Plan orders via US-001 flow)"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-4",
          "text": "scenarios have clear success criteria (defined in Testing Guide)",
          "section": "Pre-Implementation Checklist",
          "line": 558,
          "type": "Test Requirement",
          "original_line": "- [x] All test scenarios have clear success criteria (defined in Testing Guide)"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-5",
          "text": "Cases**:",
          "section": "Premium Plan Multi-Function Validation",
          "line": 597,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        },
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-6",
          "text": "audit log shows multiple ferry redemptions",
          "section": "Premium Plan Multi-Function Validation",
          "line": 601,
          "type": "Validation",
          "original_line": "- Verify audit log shows multiple ferry redemptions"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-7",
          "text": "Cases**:",
          "section": "Cross-Terminal Fraud Prevention",
          "line": 616,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        },
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-8",
          "text": "<2 second fraud detection response time",
          "section": "Cross-Terminal Fraud Prevention",
          "line": 620,
          "type": "Validation",
          "original_line": "- Verify <2 second fraud detection response time"
        },
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-9",
          "text": "audit trail shows both attempts with clear success/failure",
          "section": "Cross-Terminal Fraud Prevention",
          "line": 624,
          "type": "Validation",
          "original_line": "- Verify audit trail shows both attempts with clear success/failure"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-10",
          "text": "Cases**:",
          "section": "Performance & Edge Cases",
          "line": 627,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        }
      ],
      "covered_scenarios": [
        {
          "scenario": {
            "id": "PRD-003-event-venue-operations-SCENARIO-1",
            "text": "tickets",
            "section": "Risk: Network Connectivity Disruption",
            "line": 393,
            "type": "Validation",
            "original_line": "**Impact**: Operators unable to validate tickets"
          },
          "tests": [
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "9. æŸ¥è¯¢ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "9. æŸ¥è¯¢ç¥¨åˆ¸",
                "method": "GET",
                "url": "{{baseUrl}}/my/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›ç¥¨åˆ¸ä¸”éç©º', () => pm.expect(json).to.have.property('tickets').that.is.an('array').that.is.not.empty);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-003-event-venue-operations-TEST-3",
            "text": "data can be generated (Premium Plan orders via US-001 flow)",
            "section": "Pre-Implementation Checklist",
            "line": 557,
            "type": "Test Requirement",
            "original_line": "- [x] Test data can be generated (Premium Plan orders via US-001 flow)"
          },
          "tests": [
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Create Order from Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Create Order from Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order created from reservation\", function() {",
                  "pm.test(\"Order ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"order_id\");",
                  "pm.test(\"Payment required amount specified\", function() {",
                  "pm.expect(json).to.have.property(\"payment_required\");",
                  "pm.expect(json.payment_required).to.be.a(\"number\");",
                  "pm.expect(json.payment_required).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "5. åˆ›å»ºè®¢å•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5. åˆ›å»ºè®¢å•",
                "method": "POST",
                "url": "{{baseUrl}}/orders",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢æ‰€æœ‰OTAè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('orders');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.orders.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢å•ä¸ªè®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬å®¢æˆ·ä¿¡æ¯ã€é‡‘é¢ã€çŠ¶æ€å’Œé¢„è®¢å…³è”",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•è¯¦æƒ…\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('product_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('customer_email');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"è®¢å•åŒ…å«é¢„è®¢å…³è”\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.2 åˆ›å»ºé¢„è®¢",
              "score": 0.6,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.2 åˆ›å»ºé¢„è®¢",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPremium Planåˆ›å»º25ä¸ªå•ä½çš„é¢„è®¢",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"è¿”å›é¢„è®¢ID\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');",
                  "pm.expect(jsonData).to.have.property('reserved_until');",
                  "pm.expect(jsonData).to.have.property('pricing_snapshot');"
                ]
              }
            }
          ]
        },
        {
          "scenario": {
            "id": "PRD-003-event-venue-operations-SCENARIO-8",
            "text": "<2 second fraud detection response time",
            "section": "Cross-Terminal Fraud Prevention",
            "line": 620,
            "type": "Validation",
            "original_line": "- Verify <2 second fraud detection response time"
          },
          "tests": [
            {
              "collection": "us-013-venue-operations.json",
              "scenario": "US-013 Venue Operations Platform",
              "score": 0.8999999999999999,
              "type": "collection",
              "details": {
                "type": "collection",
                "name": "US-013 Venue Operations Platform",
                "description": "Complete E2E testing for PRD-003 Event Venue Operations including multi-terminal fraud detection and real-time analytics"
              }
            },
            {
              "collection": "us-013-venue-operations.json",
              "scenario": "Cross-Terminal Fraud Detection",
              "score": 0.6,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Cross-Terminal Fraud Detection",
                "method": "POST",
                "url": "{{base_url}}/venue/scan",
                "folder": "Enhanced Venue Scanning",
                "description": "",
                "tests": [
                  "pm.test('Fraud detection working', function () {",
                  "pm.expect(response.result).to.eql('reject');",
                  "pm.expect(response.reason).to.match(/ALREADY_REDEEMED|NO_REMAINING/);",
                  "pm.expect(response.performance_metrics.response_time_ms).to.be.below(2000);"
                ]
              }
            },
            {
              "collection": "us-013-venue-operations.json",
              "scenario": "Response Time Validation",
              "score": 0.6,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Response Time Validation",
                "method": "POST",
                "url": "{{base_url}}/venue/scan",
                "folder": "Performance Validation",
                "description": "",
                "tests": [
                  "pm.test('Response time under 2 seconds', function () {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test('Performance metrics included', function () {",
                  "pm.expect(response.performance_metrics).to.exist;",
                  "pm.expect(response.performance_metrics.response_time_ms).to.be.below(2000);",
                  "pm.expect(response.performance_metrics.fraud_checks_passed).to.be.a('boolean');"
                ]
              }
            }
          ]
        }
      ],
      "uncovered_scenarios": [
        {
          "id": "PRD-003-event-venue-operations-TEST-2",
          "text": "environment can be configured (database mode + multiple operators)",
          "section": "Pre-Implementation Checklist",
          "line": 556,
          "type": "Test Requirement",
          "original_line": "- [x] Test environment can be configured (database mode + multiple operators)"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-4",
          "text": "scenarios have clear success criteria (defined in Testing Guide)",
          "section": "Pre-Implementation Checklist",
          "line": 558,
          "type": "Test Requirement",
          "original_line": "- [x] All test scenarios have clear success criteria (defined in Testing Guide)"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-5",
          "text": "Cases**:",
          "section": "Premium Plan Multi-Function Validation",
          "line": 597,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        },
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-6",
          "text": "audit log shows multiple ferry redemptions",
          "section": "Premium Plan Multi-Function Validation",
          "line": 601,
          "type": "Validation",
          "original_line": "- Verify audit log shows multiple ferry redemptions"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-7",
          "text": "Cases**:",
          "section": "Cross-Terminal Fraud Prevention",
          "line": 616,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        },
        {
          "id": "PRD-003-event-venue-operations-SCENARIO-9",
          "text": "audit trail shows both attempts with clear success/failure",
          "section": "Cross-Terminal Fraud Prevention",
          "line": 624,
          "type": "Validation",
          "original_line": "- Verify audit trail shows both attempts with clear success/failure"
        },
        {
          "id": "PRD-003-event-venue-operations-TEST-10",
          "text": "Cases**:",
          "section": "Performance & Edge Cases",
          "line": 627,
          "type": "Test Requirement",
          "original_line": "**Test Cases**:"
        }
      ]
    },
    "PRD-004-wechat-miniprogram-auth": {
      "scenarios_discovered": [
        {
          "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-1",
          "text": "WeChat API responses (signature verification if needed)",
          "section": "Technical Requirements",
          "line": 180,
          "type": "API Test",
          "original_line": "- Validate WeChat API responses (signature verification if needed)"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-2",
          "text": "be logged in)",
          "section": "Authentication Flow Logic",
          "line": 263,
          "type": "User Flow",
          "original_line": "- Verify JWT token (user must be logged in)"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-3",
          "text": "prompt timing",
          "section": "Leading Indicators",
          "line": 394,
          "type": "Test Requirement",
          "original_line": "- Phone binding prompt acceptance: A/B test prompt timing"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-4",
          "text": "1: New User Login**",
          "section": "Core Test Scenarios",
          "line": 500,
          "type": "Test Requirement",
          "original_line": "**Scenario 1: New User Login**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-5",
          "text": "access authenticated endpoints",
          "section": "Core Test Scenarios",
          "line": 508,
          "type": "API Test",
          "original_line": "- User can access authenticated endpoints"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-6",
          "text": "2: Returning User Login**",
          "section": "Core Test Scenarios",
          "line": 511,
          "type": "Test Requirement",
          "original_line": "**Scenario 2: Returning User Login**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-7",
          "text": "3: Phone Number Binding**",
          "section": "Core Test Scenarios",
          "line": 522,
          "type": "Test Requirement",
          "original_line": "**Scenario 3: Phone Number Binding**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-8",
          "text": "4: Error Handling**",
          "section": "Core Test Scenarios",
          "line": 532,
          "type": "Test Requirement",
          "original_line": "**Scenario 4: Error Handling**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-9",
          "text": "migrations in staging environment |",
          "section": "Technical Risks",
          "line": 558,
          "type": "Test Requirement",
          "original_line": "| Database migration issues | Low | Medium | Test migrations in staging environment |"
        }
      ],
      "covered_scenarios": [
        {
          "scenario": {
            "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-1",
            "text": "WeChat API responses (signature verification if needed)",
            "section": "Technical Requirements",
            "line": 180,
            "type": "API Test",
            "original_line": "- Validate WeChat API responses (signature verification if needed)"
          },
          "tests": [
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "5000 Unit Allocation Verification",
              "score": 1,
              "type": "test",
              "details": {
                "type": "test",
                "name": "5000 Unit Allocation Verification",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "7. Performance & Scale Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Total OTA allocation meets 5000 unit requirement\", function() {",
                  "pm.expect(total).to.be.at.least(4500);",
                  "pm.expect(total).to.be.at.most(5500);",
                  "pm.test(\"Performance: Response under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Business requirement: Nov 15 deadline readiness\", function() {",
                  "pm.expect(today).to.be.below(deadline);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Business Rule: B2B2C Commission Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Business Rule: B2B2C Commission Tracking",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Commission rate preserved in reseller metadata\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata).to.have.property(\"commission_rate\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.test(\"Business rule: Commission rate between 0 and 1\", function() {",
                  "pm.expect(rate).to.be.at.least(0);",
                  "pm.expect(rate).to.be.at.most(1);"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "API Contract: OpenAPI Schema Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "API Contract: OpenAPI Schema Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Response matches OpenAPI specification\", function() {",
                  "pm.test(\"Required fields present per card specification\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json).to.have.property(\"total_generated\");",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Data Persistence: Database vs Mock Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Data Persistence: Database vs Mock Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Database mode: Random ticket IDs generated\", function() {",
                  "pm.expect(firstTicket).to.match(/CRUISE-2025-FERRY-\\d{13}/);",
                  "pm.test(\"Pricing snapshot captured with timestamp\", function() {",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"captured_at\");",
                  "pm.expect(Math.abs(now - capturedAt)).to.be.below(10000); // Within 10 seconds"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Integration: Complete B2B2C Workflow",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Integration: Complete B2B2C Workflow",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"End-to-end workflow: Generation â†’ Activation\", function() {",
                  "pm.test(\"Business value chain: Revenue tracking enabled\", function() {",
                  "pm.expect(json.pricing_snapshot.base_price).to.be.a(\"number\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.be.a(\"number\");",
                  "pm.expect(json.batch_metadata.campaign_type).to.be.a(\"string\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Creates Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Creates Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A can create reservation\", function() {",
                  "pm.test(\"Reservation ID returned\", function() {",
                  "pm.expect(json).to.have.property(\"reservation_id\");",
                  "pm.test(\"Pricing snapshot included\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner B Cannot Access Partner A Reservations",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner B Cannot Access Partner A Reservations",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B cannot see Partner A reservations\", function() {",
                  "pm.expect(foundReservation).to.be.undefined;",
                  "pm.test(\"Partner isolation maintained\", function() {",
                  "pm.expect(json).to.have.property(\"reservations\");",
                  "pm.expect(json.reservations).to.be.an(\"array\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Shared Inventory Visibility",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Shared Inventory Visibility",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Both partners see same inventory pool\", function() {",
                  "pm.expect(partnerBInventory).to.be.a(\"number\");",
                  "pm.test(\"Channel allocation working\", function() {",
                  "pm.expect(json).to.have.property(\"available_quantities\");",
                  "pm.expect(json.available_quantities).to.have.property(\"106\");",
                  "pm.expect(json.available_quantities).to.have.property(\"107\");",
                  "pm.expect(json.available_quantities).to.have.property(\"108\");"
                ]
              }
            },
            {
              "collection": "ai-generated-tests.postman_collection.json",
              "scenario": "Multi-Partner Isolation: Partner A Inventory After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Multi-Partner Isolation: Partner A Inventory After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test(\"Partner A sees reduced inventory after reservation\", function() {",
                  "pm.expect(partnerAInventory).to.equal(partnerBInventory);",
                  "pm.test(\"Inventory reflects reservation impact\", function() {",
                  "pm.expect(currentInventory).to.be.a(\"number\");",
                  "pm.expect(currentInventory).to.be.at.least(0);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Special Pricing Override - Custom Pricing Lock-in",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Response contains custom pricing override', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(response.pricing_snapshot.customer_type_pricing).to.be.an('array');",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.expect(elderlyPricing.price).to.equal(200);",
                  "pm.test('Batch ID generated for special pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.test('Tickets generated with correct status', function () {",
                  "pm.expect(response.tickets).to.be.an('array').with.length(3);",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 2: Default Pricing Fallback - No Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Default Pricing Fallback - No Special Pricing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 201', function () {",
                  "pm.test('Uses product default pricing when no special_pricing', function () {",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(228);",
                  "pm.expect(response.pricing_snapshot.currency).to.equal('USD');",
                  "pm.expect(childPricing.price).to.equal(188); // Product default",
                  "pm.test('Batch ID generated for default pricing', function () {",
                  "pm.expect(response.batch_id).to.exist;"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Activate Ticket with Special Pricing - Pricing Persistence",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activated ticket maintains special pricing', function () {",
                  "pm.expect(response.ticket.status).to.equal('ACTIVE');",
                  "pm.expect(response.ticket.pricing_snapshot).to.exist;",
                  "pm.expect(response.ticket.pricing_snapshot.base_price).to.equal(250);",
                  "pm.expect(childPricing.price).to.equal(150);",
                  "pm.test('QR code generated with proper expiry', function () {",
                  "pm.expect(response.ticket.qr_code).to.exist;",
                  "pm.expect(response.ticket.qr_expiry).to.exist;",
                  "pm.expect(hoursDiff).to.be.within(0, 24);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 4: Batch Analytics with Special Pricing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Batch Analytics with Special Pricing",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/{{special_batch_id}}/analytics",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Analytics includes special pricing information', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.pricing_snapshot).to.exist;",
                  "pm.expect(response.pricing_snapshot.base_price).to.equal(250);",
                  "pm.test('Campaign metrics tracked correctly', function () {",
                  "pm.expect(response.campaign_info).to.exist;",
                  "pm.expect(response.campaign_info.campaign_type).to.equal('flash_sale');",
                  "pm.expect(response.campaign_info.promotional_code).to.equal('FLASH25');",
                  "pm.test('Batch performance metrics available', function () {",
                  "pm.expect(response.total_tickets).to.be.a('number');",
                  "pm.expect(response.activated_tickets).to.be.a('number');",
                  "pm.expect(response.activation_rate).to.be.a('number');",
                  "pm.expect(response.activated_tickets).to.be.at.least(1);"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 5: Special Pricing Validation - Edge Cases",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Special Pricing Validation - Edge Cases",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid special pricing rejected', function () {",
                  "pm.test('Error message explains validation failure', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('price');"
                ]
              }
            },
            {
              "collection": "special-pricing-override.postman_collection.json",
              "scenario": "Test 6: Pricing Consistency Within Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Pricing Consistency Within Batch",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/CONSISTENCY-TEST-{{$randomInt}}/tickets",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('All tickets in batch have consistent pricing', function () {",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(firstTicketPricing.base_price);",
                  "pm.expect(ticket.pricing_snapshot.currency).to.equal(firstTicketPricing.currency);",
                  "pm.test('Special pricing locked-in for entire batch', function () {",
                  "pm.expect(ticket.pricing_snapshot.base_price).to.equal(280); // Custom pricing",
                  "pm.expect(childPricing.price).to.equal(210); // Custom child pricing"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Setup: Generate Test Batch for Activation Testing",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Setup: Generate Test Batch for Activation Testing",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Batch generation successful', function () {",
                  "pm.test('Setup test variables for activation testing', function () {",
                  "pm.expect(response.batch_id).to.exist;",
                  "pm.expect(response.tickets).to.be.an('array');",
                  "pm.expect(response.tickets.length).to.be.at.least(2);",
                  "pm.test('Tickets have correct initial status', function () {",
                  "pm.expect(ticket.status).to.equal('PRE_GENERATED');",
                  "pm.expect(ticket.ticket_code).to.match(/^CRUISE-\\d{4}-[A-Z]+-\\d{13}$/);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 1: Standard Ticket Activation - Adult Customer",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 1: Standard Ticket Activation - Adult Customer",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Status transition: PRE_GENERATED â†’ ACTIVE', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.expect(response.ticket_code).to.exist;",
                  "pm.test('Customer details properly assigned', function () {",
                  "pm.expect(response.customer_name).to.equal('John Doe');",
                  "pm.expect(response.customer_type).to.equal('adult');",
                  "pm.test('Order created and linked', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.match(/^ORD-\\d{13}$/);",
                  "pm.test('Special pricing preserved in activation', function () {",
                  "pm.expect(response.currency).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 2: Child Customer Activation - Special Pricing Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 2: Child Customer Activation - Special Pricing Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{special_pricing_ticket}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Child customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('child');",
                  "pm.expect(response.customer_name).to.equal('Jane Smith');",
                  "pm.test('Special pricing applied for child', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Order created with special pricing context', function () {",
                  "pm.expect(response.order_id).to.exist;",
                  "pm.expect(response.order_id).to.not.equal(pm.collectionVariables.get('order_id'));"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 3: Duplicate Activation Error - Business Rule Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 3: Duplicate Activation Error - Business Rule Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Duplicate activation returns 409', function () {",
                  "pm.test('Error message indicates already activated', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('activated');",
                  "pm.test('Business rule protection working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 4: Invalid Ticket Code - 404 Error Validation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 4: Invalid Ticket Code - 404 Error Validation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE-12345/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Invalid ticket returns 404', function () {",
                  "pm.test('Error message indicates ticket not found', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.error.toLowerCase()).to.include('not found');",
                  "pm.test('Security validation working', function () {",
                  "pm.expect(response.message).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 5: Invalid Customer Data - Validation Error",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 5: Invalid Customer Data - Validation Error",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Missing customer details returns 400', function () {",
                  "pm.test('Validation error message specific', function () {",
                  "pm.expect(response.error).to.exist;",
                  "pm.expect(response.message).to.include('customer_details');",
                  "pm.test('Input validation working correctly', function () {",
                  "pm.expect(response.error).to.equal('INVALID_REQUEST');"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 6: Multi-Partner Isolation - Wrong API Key",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 6: Multi-Partner Isolation - Wrong API Key",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/CRUISE-2025-FERRY-1763128582102/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Wrong API key returns 401/403', function () {",
                  "pm.expect([401, 403]).to.include(pm.response.code);",
                  "pm.test('Security isolation enforced', function () {",
                  "pm.expect(response.error).to.exist;"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 7: Elderly Customer - Complete Customer Type Coverage",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 7: Elderly Customer - Complete Customer Type Coverage",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{elderly_ticket_code}}/activate",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Elderly customer type handled correctly', function () {",
                  "pm.expect(response.customer_type).to.equal('elderly');",
                  "pm.expect(response.customer_name).to.equal('Robert Johnson');",
                  "pm.test('Elderly special pricing validation', function () {",
                  "pm.expect(response.status).to.equal('ACTIVE');",
                  "pm.expect(response.activated_at).to.exist;",
                  "pm.test('Complete customer type coverage achieved', function () {",
                  "pm.expect(['adult', 'child', 'elderly']).to.include(pm.response.json().customer_type);"
                ]
              }
            },
            {
              "collection": "ticket-activation-complete-coverage.postman_collection.json",
              "scenario": "Test 8: Batch Analytics After Activation - Performance Tracking",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Test 8: Batch Analytics After Activation - Performance Tracking",
                "method": "GET",
                "url": "{{base_url}}/api/ota/batches/{{test_batch_id}}/analytics",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('Status code is 200', function () {",
                  "pm.test('Activation metrics updated correctly', function () {",
                  "pm.expect(response.tickets_activated).to.be.at.least(2); // At least 2 tickets activated",
                  "pm.expect(response.tickets_generated).to.be.at.least(3); // 3 tickets generated in setup",
                  "pm.test('Conversion rates calculated', function () {",
                  "pm.expect(response.conversion_rates).to.exist;",
                  "pm.expect(response.conversion_rates.activation_rate).to.be.above(0);",
                  "pm.expect(response.conversion_rates.activation_rate).to.be.at.most(1);",
                  "pm.test('Revenue metrics reflect special pricing', function () {",
                  "pm.expect(response.revenue_metrics).to.exist;",
                  "pm.expect(response.revenue_metrics.potential_revenue).to.be.above(0);",
                  "pm.expect(response.wholesale_rate).to.equal(275); // Special pricing base",
                  "pm.test('Batch tracking complete', function () {",
                  "pm.expect(response.batch_id).to.equal(pm.collectionVariables.get('test_batch_id'));",
                  "pm.expect(response.generated_at).to.exist;"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Get Inventory - Initial State",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Get Inventory - Initial State",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Response time under 2 seconds (Performance Requirement)\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "pm.test(\"Status code is 200\", function() {",
                  "pm.test(\"Channel Allocation: Product 106 ~2000 units\", function() {",
                  "pm.expect(product106).to.be.a(\"number\");",
                  "pm.expect(product106).to.be.at.least(1500);",
                  "pm.expect(product106).to.be.at.most(2500);",
                  "pm.test(\"Channel Allocation: Product 107 ~1500 units\", function() {",
                  "pm.expect(product107).to.be.a(\"number\");",
                  "pm.expect(product107).to.be.at.least(1000);",
                  "pm.expect(product107).to.be.at.most(2000);",
                  "pm.test(\"Channel Allocation: Product 108 ~1500 units\", function() {",
                  "pm.expect(product108).to.be.a(\"number\");",
                  "pm.expect(product108).to.be.at.least(1000);",
                  "pm.expect(product108).to.be.at.most(2000);",
                  "pm.test(\"Pricing context includes customer discounts\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_context\");",
                  "pm.expect(json.pricing_context).to.have.property(\"customer_discounts\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Get Same Inventory View",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Get Same Inventory View",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "1. Channel Allocation Verification",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees identical inventory (Shared Pool)\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(initialInventory));",
                  "pm.test(\"Response time under 2 seconds\", function() {",
                  "pm.expect(pm.response.responseTime).to.be.below(2000);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner A: Create Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner A: Create Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Reservation created successfully\", function() {",
                  "pm.test(\"Reservation ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"reservation_id\");",
                  "pm.test(\"Expiry time is 24 hours from now\", function() {",
                  "pm.expect(json).to.have.property(\"reserved_until\");",
                  "pm.expect(diffHours).to.be.closeTo(24, 1);",
                  "pm.test(\"Pricing snapshot captured\", function() {",
                  "pm.expect(json).to.have.property(\"pricing_snapshot\");",
                  "pm.expect(json.pricing_snapshot).to.have.property(\"base_price\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Verify Inventory Decreased After Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Verify Inventory Decreased After Reservation",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "2. Reservation Management Flow",
                "description": "",
                "tests": [
                  "pm.test(\"Inventory decreased by reserved amount\", function() {",
                  "pm.expect(decrease).to.equal(10);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Cannot Access Partner A's Reservations",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Cannot Access Partner A's Reservations",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B cannot see Partner A's reservations\", function() {",
                  "pm.expect(foundReservation).to.be.undefined;",
                  "pm.test(\"Partner B has own reservations list\", function() {",
                  "pm.expect(json).to.have.property(\"reservations\");",
                  "pm.expect(json.reservations).to.be.an(\"array\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Partner B: Sees Same Reduced Inventory",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Partner B: Sees Same Reduced Inventory",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "3. Multi-Partner Isolation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Partner B sees same inventory reduction\", function() {",
                  "pm.expect(partnerBInventory).to.equal(parseInt(afterReserveInventory));",
                  "pm.test(\"Shared inventory pool working correctly\", function() {"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Create Order from Reservation",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Create Order from Reservation",
                "method": "POST",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order created from reservation\", function() {",
                  "pm.test(\"Order ID provided\", function() {",
                  "pm.expect(json).to.have.property(\"order_id\");",
                  "pm.test(\"Payment required amount specified\", function() {",
                  "pm.expect(json).to.have.property(\"payment_required\");",
                  "pm.expect(json.payment_required).to.be.a(\"number\");",
                  "pm.expect(json.payment_required).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Activate Order After Payment",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Activate Order After Payment",
                "method": "POST",
                "url": "{{base_url}}/api/ota/activate",
                "folder": "4. Complete OTA Workflow Validation",
                "description": "",
                "tests": [
                  "pm.test(\"Order activated successfully\", function() {",
                  "pm.test(\"Tickets issued with QR codes\", function() {",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket).to.have.property(\"ticket_code\");",
                  "pm.expect(ticket).to.have.property(\"qr_code\");",
                  "pm.expect(ticket.status).to.equal(\"ACTIVE\");",
                  "pm.test(\"Activation status is success\", function() {",
                  "pm.expect(json.activation_status).to.equal(\"success\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Generate Reseller Batch",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Generate Reseller Batch",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Bulk generation successful\", function() {",
                  "pm.test(\"Batch ID and tickets provided\", function() {",
                  "pm.expect(json).to.have.property(\"batch_id\");",
                  "pm.expect(json).to.have.property(\"tickets\");",
                  "pm.expect(json.tickets).to.be.an(\"array\");",
                  "pm.expect(json.tickets.length).to.equal(100);",
                  "pm.test(\"Reseller metadata preserved\", function() {",
                  "pm.expect(json).to.have.property(\"reseller_metadata\");",
                  "pm.expect(json.reseller_metadata.intended_reseller).to.equal(\"Test Reseller Network\");",
                  "pm.expect(json.reseller_metadata.commission_rate).to.equal(0.15);",
                  "pm.test(\"Extended expiry for reseller batches\", function() {",
                  "pm.expect(json).to.have.property(\"expires_at\");",
                  "pm.expect(diffHours).to.be.above(24); // Extended beyond 24h"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Query Generated Tickets",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Query Generated Tickets",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?batch_id={{reseller_batch_id}}&status=PRE_GENERATED&limit=50",
                "folder": "5. B2B2C Bulk Generation Tests",
                "description": "",
                "tests": [
                  "pm.test(\"Ticket query successful\", function() {",
                  "pm.test(\"Batch tickets filtered correctly\", function() {",
                  "pm.expect(json.tickets.length).to.be.above(0);",
                  "pm.expect(ticket.batch_id).to.equal(batchId);",
                  "pm.expect(ticket.status).to.equal(\"PRE_GENERATED\");",
                  "pm.test(\"Pagination working\", function() {",
                  "pm.expect(json).to.have.property(\"total_count\");",
                  "pm.expect(json).to.have.property(\"page\");",
                  "pm.expect(json).to.have.property(\"page_size\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Invalid API Key - Unauthorized",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Invalid API Key - Unauthorized",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Invalid API key rejected\", function() {",
                  "pm.test(\"Proper error message\", function() {",
                  "pm.expect(json.error).to.equal(\"INVALID_API_KEY\");"
                ]
              }
            },
            {
              "collection": "us-012-complete-coverage.postman_collection.json",
              "scenario": "Overselling Prevention",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "Overselling Prevention",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "6. Security & Error Handling",
                "description": "",
                "tests": [
                  "pm.test(\"Overselling attempt prevented\", function() {",
                  "pm.test(\"Insufficient inventory error\", function() {",
                  "pm.expect(json.error).to.equal(\"INSUFFICIENT_INVENTORY\");"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "6. å¾®ä¿¡é¢„ä¸‹å•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "6. å¾®ä¿¡é¢„ä¸‹å•",
                "method": "POST",
                "url": "{{baseUrl}}/payments/wechat/session",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-010a-traveler-loop.json",
              "scenario": "8. ç”Ÿæˆ demo token",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "8. ç”Ÿæˆ demo token",
                "method": "POST",
                "url": "{{baseUrl}}/api/v1/auth/demo-token",
                "folder": "",
                "description": "",
                "tests": [
                  "pm.test('status 200', () => pm.response.to.have.status(200));"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.0 æŸ¥è¯¢äº§å“ç›®å½• ğŸ“¦",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.0 æŸ¥è¯¢äº§å“ç›®å½• ğŸ“¦",
                "method": "GET",
                "url": "{{base_url}}/api/ota/products?product_ids=106,107,108",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAå¯å”®äº§å“ç›®å½•ï¼ŒåŒ…å«äº§å“è¯¦æƒ…ã€åŠŸèƒ½entitlementså’Œæ¸ é“åº“å­˜åˆ†é…",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›äº§å“åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('products');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.products.length).to.be.above(0);",
                  "pm.test(\"äº§å“åŒ…å«å®Œæ•´ä¿¡æ¯\", function () {",
                  "pm.expect(product).to.have.property('product_id');",
                  "pm.expect(product).to.have.property('name');",
                  "pm.expect(product).to.have.property('sku');",
                  "pm.expect(product).to.have.property('unit_price');",
                  "pm.expect(product).to.have.property('functions');",
                  "pm.expect(product).to.have.property('channel_allocations');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.1 æŸ¥è¯¢OTAåº“å­˜",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.1 æŸ¥è¯¢OTAåº“å­˜",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢OTAæ¸ é“å¯ç”¨çš„åº“å­˜æ•°é‡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›åº“å­˜æ•°æ®\", function () {",
                  "pm.expect(jsonData).to.have.property('available_quantities');",
                  "pm.expect(jsonData.available_quantities).to.have.property('106');",
                  "pm.expect(jsonData.available_quantities).to.have.property('107');",
                  "pm.expect(jsonData.available_quantities).to.have.property('108');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.2 åˆ›å»ºé¢„è®¢",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.2 åˆ›å»ºé¢„è®¢",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPremium Planåˆ›å»º25ä¸ªå•ä½çš„é¢„è®¢",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"è¿”å›é¢„è®¢ID\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');",
                  "pm.expect(jsonData).to.have.property('reserved_until');",
                  "pm.expect(jsonData).to.have.property('pricing_snapshot');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.3 æŸ¥è¯¢é¢„è®¢è¯¦æƒ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.3 æŸ¥è¯¢é¢„è®¢è¯¦æƒ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/reservations/{{reservation_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢åˆšåˆ›å»ºçš„é¢„è®¢è¯¦æƒ…",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"é¢„è®¢çŠ¶æ€ä¸ºactive\", function () {",
                  "pm.expect(jsonData.status).to.eql('active');",
                  "pm.expect(jsonData.product_id).to.eql(106);",
                  "pm.expect(jsonData.quantity).to.eql(25);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.4 æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸ â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.4 æ¿€æ´»é¢„è®¢ â†’ ç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸ â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reservations/{{reservation_id}}/activate",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„è®¢ï¼Œç”Ÿæˆè®¢å•å’Œç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"è®¢å•åˆ›å»ºæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"ç”Ÿæˆäº†25å¼ ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.tickets).to.have.lengthOf(25);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«entitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5 æŸ¥è¯¢è®¢å•åˆ—è¡¨",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢æ‰€æœ‰OTAè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('orders');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData.orders.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.5.1 æŸ¥è¯¢è®¢å•è¯¦æƒ… ğŸ“‹",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æŸ¥è¯¢å•ä¸ªè®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬å®¢æˆ·ä¿¡æ¯ã€é‡‘é¢ã€çŠ¶æ€å’Œé¢„è®¢å…³è”",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›è®¢å•è¯¦æƒ…\", function () {",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('product_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('customer_email');",
                  "pm.expect(jsonData).to.have.property('total_amount');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('confirmation_code');",
                  "pm.test(\"è®¢å•åŒ…å«é¢„è®¢å…³è”\", function () {",
                  "pm.expect(jsonData).to.have.property('reservation_id');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "1.6 è·å–è®¢å•ç¥¨åˆ¸å’ŒQRç ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹ä¸€: é¢„è®¢æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "è·å–è®¢å•çš„æ‰€æœ‰ç¥¨åˆ¸å’ŒQRç ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«QRç \", function () {",
                  "pm.expect(firstTicket).to.have.property('ticket_code');",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket).to.have.property('status');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.1 æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "ä¸ºPet Planæ‰¹é‡ç”Ÿæˆ10å¼ é¢„åˆ¶ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯201\", function () {",
                  "pm.test(\"æ‰¹é‡ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('batch_id');",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_generated');",
                  "pm.expect(jsonData.total_generated).to.eql(10);",
                  "pm.test(\"ç¥¨æ®çŠ¶æ€ä¸ºPRE_GENERATED\", function () {",
                  "pm.expect(firstTicket.status).to.eql('PRE_GENERATED');",
                  "pm.test(\"ç¥¨æ®åŒ…å«QRç å’Œentitlements\", function () {",
                  "pm.expect(firstTicket).to.have.property('qr_code');",
                  "pm.expect(firstTicket).to.have.property('entitlements');",
                  "pm.expect(firstTicket.entitlements.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.2 æ¿€æ´»é¢„åˆ¶ç¥¨æ® â†’ ç”Ÿæˆè®¢å• â­",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "æ¿€æ´»é¢„åˆ¶ç¥¨æ®ï¼Œç»‘å®šå®¢æˆ·ä¿¡æ¯å¹¶ç”Ÿæˆè®¢å•",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç¥¨æ®æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('ticket_code');",
                  "pm.expect(jsonData).to.have.property('order_id');",
                  "pm.expect(jsonData).to.have.property('customer_name');",
                  "pm.expect(jsonData).to.have.property('status');",
                  "pm.expect(jsonData).to.have.property('activated_at');",
                  "pm.test(\"çŠ¶æ€è½¬æ¢ä¸ºACTIVE\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');",
                  "pm.test(\"å®¢æˆ·ä¿¡æ¯å·²ç»‘å®š\", function () {",
                  "pm.expect(jsonData.customer_name).to.eql('æå››');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "2.3 éªŒè¯è®¢å•å·²åˆ›å»º",
                "method": "GET",
                "url": "{{base_url}}/api/ota/orders/{{order_id}}/tickets",
                "folder": "æµç¨‹äºŒ: é¢„åˆ¶ç¥¨æ®æ¿€æ´» â†’ ç”Ÿæˆè®¢å•",
                "description": "éªŒè¯è®¢å•å·²åˆ›å»ºä¸”åŒ…å«ç¥¨æ®",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è®¢å•ç¥¨æ®æŸ¥è¯¢æˆåŠŸ\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData.tickets.length).to.be.above(0);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡A",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Açš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(5);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨åˆ¸æ‰¹æ¬¡B",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç”Ÿæˆæ‰¹æ¬¡Bçš„æµ‹è¯•ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ\", function () {",
                  "pm.expect(jsonData.total_generated).to.eql(3);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ç¥¨åˆ¸,ä¸å¸¦ä»»ä½•è¿‡æ»¤æ¡ä»¶",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›ç¥¨åˆ¸åˆ—è¡¨\", function () {",
                  "pm.expect(jsonData).to.have.property('tickets');",
                  "pm.expect(jsonData).to.have.property('total_count');",
                  "pm.expect(jsonData).to.have.property('page');",
                  "pm.expect(jsonData).to.have.property('page_size');",
                  "pm.test(\"ç¥¨åˆ¸åŒ…å«å®Œæ•´å­—æ®µ\", function () {",
                  "pm.expect(ticket).to.have.property('ticket_code');",
                  "pm.expect(ticket).to.have.property('status');",
                  "pm.expect(ticket).to.have.property('batch_id');",
                  "pm.expect(ticket).to.have.property('product_id');",
                  "pm.expect(ticket).to.have.property('created_at');",
                  "pm.expect(ticket).to.have.property('activated_at');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æŒ‰çŠ¶æ€è¿‡æ»¤ - PRE_GENERATED âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸(å¯å”®åº“å­˜)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›PRE_GENERATEDçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_for_activation}}/activate",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æ¿€æ´»ä¸€å¼ ç¥¨åˆ¸,ç”¨äºæµ‹è¯•ACTIVEçŠ¶æ€è¿‡æ»¤",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 æŒ‰çŠ¶æ€è¿‡æ»¤ - ACTIVE âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=ACTIVE",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŸ¥è¯¢æ‰€æœ‰ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸(å·²å”®å‡º)",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"åªè¿”å›ACTIVEçŠ¶æ€çš„ç¥¨åˆ¸\", function () {",
                  "pm.expect(jsonData.total_count).to.be.above(0);",
                  "pm.expect(ticket.status).to.eql('ACTIVE');",
                  "pm.expect(ticket.activated_at).to.not.be.null;",
                  "pm.expect(ticket.customer_name).to.not.be.null;"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 åˆ†é¡µæµ‹è¯• - ç¬¬1é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=1&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬1é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(2);",
                  "pm.expect(jsonData.tickets.length).to.be.at.most(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 åˆ†é¡µæµ‹è¯• - ç¬¬2é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=2&limit=2",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•åˆ†é¡µåŠŸèƒ½ - ç¬¬2é¡µ,æ¯é¡µ2æ¡",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›æ­£ç¡®çš„åˆ†é¡µä¿¡æ¯\", function () {",
                  "pm.expect(jsonData.page).to.eql(2);",
                  "pm.expect(jsonData.page_size).to.eql(2);"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?created_after=2025-11-01T00:00:00Z&created_before=2025-12-31T23:59:59Z",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿‡æ»¤ç¥¨åˆ¸",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"è¿”å›çš„ç¥¨åˆ¸éƒ½åœ¨æ—¶é—´èŒƒå›´å†…\", function () {",
                  "pm.expect(createdAt.getTime()).to.be.at.least(startDate.getTime());",
                  "pm.expect(createdAt.getTime()).to.be.at.most(endDate.getTime());"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.7 ç»„åˆè¿‡æ»¤ - çŠ¶æ€+åˆ†é¡µ âœ…",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?status=PRE_GENERATED&page=1&limit=10",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "ç»„åˆä½¿ç”¨çŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ",
                "tests": [
                  "pm.test(\"çŠ¶æ€ç æ˜¯200\", function () {",
                  "pm.test(\"ç»„åˆè¿‡æ»¤ç”Ÿæ•ˆ\", function () {",
                  "pm.expect(jsonData.page).to.eql(1);",
                  "pm.expect(jsonData.page_size).to.eql(10);",
                  "pm.expect(ticket.status).to.eql('PRE_GENERATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.8 é”™è¯¯æµ‹è¯• - æ— æ•ˆåˆ†é¡µå‚æ•° âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/tickets?page=0&limit=-5",
                "folder": "æµç¨‹ä¸‰: ç¥¨åˆ¸åˆ—è¡¨æŸ¥è¯¢æµ‹è¯• ğŸ”",
                "description": "æµ‹è¯•æ— æ•ˆçš„åˆ†é¡µå‚æ•°",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('INVALID_PARAMETER');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: ç”Ÿæˆæµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/bulk-generate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ç”Ÿæˆä¸€å¼ æµ‹è¯•ç¥¨æ®ç”¨äºåç»­æµ‹è¯•",
                "tests": [
                  "pm.test(\"ç¥¨æ®ç”ŸæˆæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "å‡†å¤‡: æ¿€æ´»æµ‹è¯•ç¥¨æ®",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "é¦–æ¬¡æ¿€æ´»ç¥¨æ®",
                "tests": [
                  "pm.test(\"æ¿€æ´»æˆåŠŸ\", function () {",
                  "pm.expect(jsonData.status).to.eql('ACTIVE');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.1 æµ‹è¯•é‡å¤æ¿€æ´»ä¿æŠ¤ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/{{test_ticket_code}}/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•å†æ¬¡æ¿€æ´»åŒä¸€å¼ ç¥¨æ®ï¼Œåº”è¯¥è¿”å›409é”™è¯¯",
                "tests": [
                  "pm.test(\"è¿”å›409å†²çªé”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_ALREADY_ACTIVATED');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.2 æµ‹è¯•æ— æ•ˆç¥¨æ®ç  âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/tickets/INVALID-TICKET-CODE/activate",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•æ¿€æ´»ä¸å­˜åœ¨çš„ç¥¨æ®",
                "tests": [
                  "pm.test(\"è¿”å›404é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('TICKET_NOT_FOUND');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.3 åˆ›å»ºé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.3 åˆ›å»ºé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "åˆ›å»ºä¸€ä¸ªé¢„è®¢ç”¨äºå–æ¶ˆæµ‹è¯•",
                "tests": [
                  "pm.test(\"é¢„è®¢åˆ›å»ºæˆåŠŸ\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.4 å–æ¶ˆé¢„è®¢",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.4 å–æ¶ˆé¢„è®¢",
                "method": "DELETE",
                "url": "{{base_url}}/api/ota/reservations/{{test_reservation_id}}",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å–æ¶ˆé¢„è®¢ï¼Œåº“å­˜åº”è¯¥é‡Šæ”¾",
                "tests": [
                  "pm.test(\"è¿”å›204 No Content\", function () {"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.5 æµ‹è¯•æ— æ•ˆAPI Key âŒ",
                "method": "GET",
                "url": "{{base_url}}/api/ota/inventory",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "ä½¿ç”¨æ— æ•ˆAPI Keyæµ‹è¯•è®¤è¯",
                "tests": [
                  "pm.test(\"è¿”å›401æœªæˆæƒ\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData.error).to.eql('INVALID_API_KEY');"
                ]
              }
            },
            {
              "collection": "us-012-ota-integration.json",
              "scenario": "3.6 æµ‹è¯•è¶…é‡é¢„è®¢ âŒ",
              "score": 0.7,
              "type": "test",
              "details": {
                "type": "test",
                "name": "3.6 æµ‹è¯•è¶…é‡é¢„è®¢ âŒ",
                "method": "POST",
                "url": "{{base_url}}/api/ota/reserve",
                "folder": "æµç¨‹å››: çŠ¶æ€è½¬æ¢å’Œé”™è¯¯å¤„ç†éªŒè¯",
                "description": "å°è¯•é¢„è®¢è¶…è¿‡é™åˆ¶ï¼ˆ100ï¼‰çš„æ•°é‡",
                "tests": [
                  "pm.test(\"è¿”å›422éªŒè¯é”™è¯¯\", function () {",
                  "pm.test(\"é”™è¯¯ä¿¡æ¯æ­£ç¡®\", function () {",
                  "pm.expect(jsonData).to.have.property('error');",
                  "pm.expect(jsonData.error).to.eql('VALIDATION_ERROR');"
                ]
              }
            }
          ]
        }
      ],
      "uncovered_scenarios": [
        {
          "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-2",
          "text": "be logged in)",
          "section": "Authentication Flow Logic",
          "line": 263,
          "type": "User Flow",
          "original_line": "- Verify JWT token (user must be logged in)"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-3",
          "text": "prompt timing",
          "section": "Leading Indicators",
          "line": 394,
          "type": "Test Requirement",
          "original_line": "- Phone binding prompt acceptance: A/B test prompt timing"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-4",
          "text": "1: New User Login**",
          "section": "Core Test Scenarios",
          "line": 500,
          "type": "Test Requirement",
          "original_line": "**Scenario 1: New User Login**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-SCENARIO-5",
          "text": "access authenticated endpoints",
          "section": "Core Test Scenarios",
          "line": 508,
          "type": "API Test",
          "original_line": "- User can access authenticated endpoints"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-6",
          "text": "2: Returning User Login**",
          "section": "Core Test Scenarios",
          "line": 511,
          "type": "Test Requirement",
          "original_line": "**Scenario 2: Returning User Login**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-7",
          "text": "3: Phone Number Binding**",
          "section": "Core Test Scenarios",
          "line": 522,
          "type": "Test Requirement",
          "original_line": "**Scenario 3: Phone Number Binding**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-8",
          "text": "4: Error Handling**",
          "section": "Core Test Scenarios",
          "line": 532,
          "type": "Test Requirement",
          "original_line": "**Scenario 4: Error Handling**"
        },
        {
          "id": "PRD-004-wechat-miniprogram-auth-TEST-9",
          "text": "migrations in staging environment |",
          "section": "Technical Risks",
          "line": 558,
          "type": "Test Requirement",
          "original_line": "| Database migration issues | Low | Medium | Test migrations in staging environment |"
        }
      ]
    }
  }
}
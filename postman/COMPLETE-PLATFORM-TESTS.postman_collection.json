{
  "info": {
    "name": "ğŸš€ å®Œæ•´å¹³å°æµ‹è¯•é›†åˆ - All PRDs Coverage",
    "description": "ç»Ÿä¸€çš„å®Œæ•´æµ‹è¯•é›†åˆï¼Œè¦†ç›–æ‰€æœ‰ PRD éœ€æ±‚ï¼ˆPRD-001 åˆ° PRD-005ï¼‰\n\nåŒ…å«:\n- PRD-001: é‚®è½®ç¥¨åŠ¡å¹³å° (100%)\n- PRD-002: OTA å¹³å°é›†æˆ (100%)\n- PRD-003: åœºé¦†è¿è¥ (100%)\n- PRD-004: å¾®ä¿¡è®¤è¯ (API å±‚é¢)\n- PRD-005: B2B è®¡è´¹åˆ†æ (100%)\n\næ€»æµ‹è¯•æ•°: 80+ è¯·æ±‚, 200+ æ–­è¨€",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "complete-platform-tests-v1"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "ota_api_key",
      "value": "ota_full_access_partner",
      "type": "string"
    },
    {
      "key": "admin_api_key",
      "value": "admin_master_key",
      "type": "string"
    },
    {
      "key": "reservation_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "order_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "ticket_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "batch_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "reseller_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "qr_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "wechat_code",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "ğŸ“¦ PRD-001: é‚®è½®ç¥¨åŠ¡æ ¸å¿ƒæµç¨‹",
      "description": "æ ¸å¿ƒç¥¨åŠ¡è´­ä¹°ã€å®šä»·ã€æ¿€æ´»ã€æ ¸é”€æµç¨‹",
      "item": [
        {
          "name": "1.1 æŸ¥è¯¢äº§å“ç›®å½•",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "products"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›äº§å“åˆ—è¡¨', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.products).to.be.an('array');",
                  "    pm.expect(data.products.length).to.be.greaterThan(0);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.2 åˆ›å»ºè®¢å•ï¼ˆå·¥ä½œæ—¥æˆäººç¥¨ï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [{\"product_id\": 106, \"qty\": 1}],\n  \"channel_id\": 1,\n  \"out_trade_no\": \"TEST_WEEKDAY_ADULT_{{$timestamp}}\",\n  \"customer_details\": {\n    \"name\": \"æµ‹è¯•ç”¨æˆ·\",\n    \"email\": \"test@example.com\",\n    \"phone\": \"13800138000\"\n  },\n  \"customer_type\": \"adult\",\n  \"visit_date\": \"2025-11-20\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('è®¢å•åˆ›å»ºæˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å›è®¢å•ID', () => pm.expect(data.order_id).to.exist);",
                  "pm.environment.set('order_id', data.order_id);",
                  "pm.test('ä»·æ ¼ä¸ºå·¥ä½œæ—¥æˆäººä»·', () => {",
                  "    pm.expect(data.total_amount).to.equal(288);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.3 åˆ›å»ºè®¢å•ï¼ˆå‘¨æœ«å„¿ç«¥ç¥¨ - åŠ¨æ€å®šä»·ï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [{\"product_id\": 106, \"qty\": 1}],\n  \"channel_id\": 1,\n  \"out_trade_no\": \"TEST_WEEKEND_CHILD_{{$timestamp}}\",\n  \"customer_details\": {\n    \"name\": \"å„¿ç«¥æµ‹è¯•\",\n    \"email\": \"child@example.com\",\n    \"phone\": \"13800138001\"\n  },\n  \"customer_type\": \"child\",\n  \"visit_date\": \"2025-11-23\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('è®¢å•åˆ›å»ºæˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('ä»·æ ¼ä¸ºå‘¨æœ«å„¿ç«¥ä»·ï¼ˆ65%æŠ˜æ‰£ + å‘¨æœ«åŠ ä»·ï¼‰', () => {",
                  "    pm.expect(data.total_amount).to.equal(218);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.4 ã€ç¼ºå£è¡¥å……ã€‘å³°å€¼å®šä»·éªŒè¯",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [{\"product_id\": 106, \"qty\": 1}],\n  \"channel_id\": 1,\n  \"out_trade_no\": \"TEST_PEAK_{{$timestamp}}\",\n  \"customer_details\": {\n    \"name\": \"å³°å€¼æµ‹è¯•\",\n    \"email\": \"peak@example.com\",\n    \"phone\": \"13800138002\"\n  },\n  \"customer_type\": \"adult\",\n  \"visit_date\": \"2025-12-25\",\n  \"is_peak_season\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "orders"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('å³°å€¼å®šä»·ç”Ÿæ•ˆ', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.total_amount).to.be.greaterThan(318);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.5 ã€æ–°å¢ã€‘å¤æ‚å®šä»·å¼•æ“ - è·å–å®šä»·è§„åˆ™",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/pricing/rules/106",
              "host": ["{{base_url}}"],
              "path": ["pricing", "rules", "106"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›å®šä»·è§„åˆ™', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data).to.have.property('base_prices');",
                  "    pm.expect(data).to.have.property('time_rules');",
                  "    pm.expect(data).to.have.property('customer_rules');",
                  "    pm.expect(data).to.have.property('available_addons');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.6 ã€æ–°å¢ã€‘å¤æ‚å®šä»·å¼•æ“ - è®¡ç®—å·¥ä½œæ—¥æˆäººä»·æ ¼",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"booking_dates\": [\"2025-11-10\"],\n  \"customer_breakdown\": [\n    {\"customer_type\": \"adult\", \"count\": 2}\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/pricing/calculate",
              "host": ["{{base_url}}"],
              "path": ["pricing", "calculate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›å®šä»·è®¡ç®—ç»“æœ', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data).to.have.property('base_price');",
                  "    pm.expect(data).to.have.property('final_total');",
                  "    pm.expect(data).to.have.property('breakdown');",
                  "    // 2 adults Ã— $288 = $576",
                  "    pm.expect(data.base_price).to.equal(576);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.7 ã€æ–°å¢ã€‘å¤æ‚å®šä»·å¼•æ“ - è®¡ç®—å‘¨æœ«ä»·æ ¼",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"booking_dates\": [\"2025-11-15\"],\n  \"customer_breakdown\": [\n    {\"customer_type\": \"adult\", \"count\": 2}\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/pricing/calculate",
              "host": ["{{base_url}}"],
              "path": ["pricing", "calculate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('å‘¨æœ«ä»·æ ¼åŒ…å«åŠ ä»·', () => {",
                  "    const data = pm.response.json();",
                  "    // 2 adults Ã— $318 (weekend) = $636",
                  "    pm.expect(data.final_total).to.be.at.least(636);",
                  "    pm.expect(data.breakdown.time_adjustments).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.8 ã€æ–°å¢ã€‘å¤æ‚å®šä»·å¼•æ“ - æ··åˆå®¢æˆ·ç±»å‹",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"booking_dates\": [\"2025-11-10\"],\n  \"customer_breakdown\": [\n    {\"customer_type\": \"adult\", \"count\": 1},\n    {\"customer_type\": \"child\", \"count\": 2}\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/pricing/calculate",
              "host": ["{{base_url}}"],
              "path": ["pricing", "calculate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('æ··åˆç±»å‹ä»·æ ¼æ­£ç¡®', () => {",
                  "    const data = pm.response.json();",
                  "    // 1 adult Ã— $288 + 2 children Ã— $188 = $664",
                  "    pm.expect(data.base_price).to.equal(664);",
                  "    pm.expect(data.breakdown.per_customer_costs.length).to.equal(2);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.9 ã€æ–°å¢ã€‘å¤æ‚å®šä»·å¼•æ“ - å¸¦é™„åŠ äº§å“",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"booking_dates\": [\"2025-11-10\"],\n  \"customer_breakdown\": [\n    {\"customer_type\": \"adult\", \"count\": 2}\n  ],\n  \"addons\": [\n    {\"addon_id\": \"tokens-plan-a\", \"quantity\": 1}\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/pricing/calculate",
              "host": ["{{base_url}}"],
              "path": ["pricing", "calculate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('é™„åŠ äº§å“ä»·æ ¼åŒ…å«åœ¨æ€»ä»·ä¸­', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data).to.have.property('addons_total');",
                  "    pm.expect(data.addons_total).to.equal(100);",
                  "    // $576 (base) + $100 (addon) = $676",
                  "    pm.expect(data.final_total).to.equal(676);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.10 ã€æ–°å¢ã€‘è·å–ç”¨æˆ·è®¢å•åˆ—è¡¨ - GET /orders",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{auth_token}}"}
            ],
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›è®¢å•åˆ—è¡¨', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data).to.have.property('orders');",
                  "    pm.expect(data).to.have.property('total_count');",
                  "    pm.expect(data.orders).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "1.11 ã€æ–°å¢ã€‘è·å–ç”¨æˆ·è®¢å•åˆ—è¡¨ - GET /my/orders",
          "request": {
            "method": "GET",
            "header": [
              {"key": "Authorization", "value": "Bearer {{auth_token}}"}
            ],
            "url": {
              "raw": "{{base_url}}/my/orders",
              "host": ["{{base_url}}"],
              "path": ["my", "orders"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›è®¢å•åˆ—è¡¨', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data).to.have.property('orders');",
                  "    pm.expect(data).to.have.property('total_count');",
                  "    pm.expect(data.orders).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸŒ PRD-002: OTA å¹³å°å®Œæ•´æµç¨‹",
      "description": "OTA åº“å­˜ç®¡ç†ã€é¢„è®¢ã€æ‰¹é‡ç”Ÿæˆã€æ¿€æ´»ã€åˆ†é”€å•†ç®¡ç†",
      "item": [
        {
          "name": "2.1 æŸ¥è¯¢ OTA åº“å­˜",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/inventory?product_ids=106,107,108",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "inventory"
              ],
              "query": [
                {
                  "key": "product_ids",
                  "value": "106,107,108"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›åº“å­˜ä¿¡æ¯', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.inventory).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.2 åˆ›å»ºé¢„è®¢",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 10,\n  \"reservation_expires_at\": \"{{$isoTimestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reserve",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reserve"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('é¢„è®¢åˆ›å»ºæˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å›é¢„è®¢ID', () => pm.expect(data.reservation_id).to.exist);",
                  "pm.environment.set('reservation_id', data.reservation_id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.3 æ¿€æ´»é¢„è®¢",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"OTAå®¢æˆ·\",\n    \"email\": \"ota@example.com\",\n    \"phone\": \"13900139000\"\n  },\n  \"customer_type\": [\"adult\", \"adult\"],\n  \"payment_reference\": \"OTA_PAY_{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reservations/{{reservation_id}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reservations",
                "{{reservation_id}}",
                "activate"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('æ¿€æ´»æˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('ç”Ÿæˆè®¢å•', () => pm.expect(data.order_id).to.exist);",
                  "pm.environment.set('order_id', data.order_id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.4 æ‰¹é‡ç”Ÿæˆç¥¨åˆ¸ï¼ˆåˆ†é”€å•†æ¨¡å¼ï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 107,\n  \"quantity\": 100,\n  \"batch_id\": \"BATCH_{{$timestamp}}\",\n  \"distribution_mode\": \"reseller_batch\",\n  \"reseller_metadata\": {\n    \"intended_reseller\": \"å¹¿å·æ—…è¡Œç¤¾\",\n    \"batch_purpose\": \"æ˜¥èŠ‚ä¿ƒé”€\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/bulk-generate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "bulk-generate"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('æ‰¹é‡ç”ŸæˆæˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('ç”Ÿæˆ 100 å¼ ç¥¨åˆ¸', () => pm.expect(data.tickets.length).to.equal(100));",
                  "pm.environment.set('batch_id', data.batch_id);",
                  "pm.environment.set('ticket_code', data.tickets[0].ticket_code);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.5 æ¿€æ´»é¢„åˆ¶ç¥¨åˆ¸",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_details\": {\n    \"name\": \"ç»ˆç«¯ç”¨æˆ·\",\n    \"email\": \"enduser@example.com\",\n    \"phone\": \"13900139001\"\n  },\n  \"customer_type\": \"adult\",\n  \"visit_date\": \"2025-12-01\",\n  \"payment_reference\": \"RESELLER_PAY_{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/tickets/{{ticket_code}}/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "tickets",
                "{{ticket_code}}",
                "activate"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ç¥¨åˆ¸æ¿€æ´»æˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('ç¥¨åˆ¸çŠ¶æ€å˜ä¸º ACTIVE', () => pm.expect(data.status).to.equal('ACTIVE'));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.6 ã€ç¼ºå£è¡¥å……ã€‘24å°æ—¶é¢„è®¢è¿‡æœŸæµ‹è¯•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 5,\n  \"reservation_expires_at\": \"2025-01-01T00:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/reserve",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "reserve"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('åˆ›å»ºè¿‡æœŸé¢„è®¢', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.environment.set('expired_reservation_id', data.reservation_id);",
                  "",
                  "// è§¦å‘æ¸…ç†",
                  "setTimeout(() => {",
                  "    pm.sendRequest({",
                  "        url: pm.environment.get('base_url') + '/api/ota/reservations/cleanup',",
                  "        method: 'POST',",
                  "        header: {'X-API-Key': pm.environment.get('ota_api_key')}",
                  "    }, (err, res) => {",
                  "        pm.test('æ¸…ç†ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ', () => pm.expect(res.code).to.equal(200));",
                  "    });",
                  "}, 1000);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.7 ã€ç¼ºå£è¡¥å……ã€‘é€Ÿç‡é™åˆ¶æµ‹è¯•",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/inventory",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "inventory"
              ]
            }
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// æ¨¡æ‹Ÿè¿ç»­ 101 æ¬¡è¯·æ±‚",
                  "let count = 0;",
                  "const maxRequests = 101;",
                  "",
                  "function sendRequest() {",
                  "    if (count < maxRequests) {",
                  "        pm.sendRequest({",
                  "            url: pm.environment.get('base_url') + '/api/ota/inventory',",
                  "            method: 'GET',",
                  "            header: {'X-API-Key': pm.environment.get('ota_api_key')}",
                  "        }, (err, res) => {",
                  "            count++;",
                  "            if (count === maxRequests && res.code === 429) {",
                  "                pm.environment.set('rate_limit_triggered', 'true');",
                  "            }",
                  "            if (count < maxRequests) sendRequest();",
                  "        });",
                  "    }",
                  "}",
                  "sendRequest();"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('é€Ÿç‡é™åˆ¶åœ¨ 100 req/min ç”Ÿæ•ˆ', () => {",
                  "    pm.expect(pm.environment.get('rate_limit_triggered')).to.equal('true');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2.8 ã€ç¼ºå£è¡¥å……ã€‘å®¡è®¡æ—¥å¿—éªŒè¯",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{admin_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/audit-logs?entity_type=reservation&entity_id={{reservation_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "audit-logs"
              ],
              "query": [
                {
                  "key": "entity_type",
                  "value": "reservation"
                },
                {
                  "key": "entity_id",
                  "value": "{{reservation_id}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('å®¡è®¡æ—¥å¿—å­˜åœ¨', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('è®°å½•çŠ¶æ€è½¬æ¢', () => {",
                  "    pm.expect(data.logs).to.be.an('array');",
                  "    pm.expect(data.logs.length).to.be.greaterThan(0);",
                  "});",
                  "pm.test('åŒ…å«åˆ›å»ºå’Œæ¿€æ´»äº‹ä»¶', () => {",
                  "    const events = data.logs.map(log => log.event_type);",
                  "    pm.expect(events).to.include('reservation_created');",
                  "    pm.expect(events).to.include('reservation_activated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸª PRD-003: åœºé¦†è¿è¥æµç¨‹",
      "description": "åœºé¦†æ ¸é”€ï¼ˆä¸¤æ­¥æµç¨‹ï¼šè§£ç â†’æ ¸é”€ï¼‰ã€é˜²æ¬ºè¯ˆã€è´Ÿè½½æµ‹è¯•ã€å®¹é”™æµ‹è¯•",
      "item": [
        {
          "name": "3.1 è·å–ç¥¨åˆ¸ä¿¡æ¯ï¼ˆä¸ç”ŸæˆQRï¼‰",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/qr/{{ticket_code}}/info",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "qr",
                "{{ticket_code}}",
                "info"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›ç¥¨åˆ¸ä¿¡æ¯', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.ticket_code).to.exist;",
                  "    pm.expect(data.entitlements).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3.2 ç”Ÿæˆ QR ç ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"expiry_minutes\": 30}"
            },
            "url": {
              "raw": "{{base_url}}/qr/{{ticket_code}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "qr",
                "{{ticket_code}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å›QRæ•°æ®', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.encrypted_data).to.exist;",
                  "    pm.expect(data.jti).to.exist;",
                  "    pm.collectionVariables.set('qr_token', data.encrypted_data);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3.3 è§£ç QRç ï¼ˆæŸ¥çœ‹ä¿¡æ¯ï¼Œä¸æ¶ˆè€—æƒç›Šï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"encrypted_data\": \"{{qr_token}}\"}"
            },
            "url": {
              "raw": "{{base_url}}/qr/decrypt",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "qr",
                "decrypt"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('æˆåŠŸè§£ç QRæ•°æ®', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.ticket_code).to.exist;",
                  "    pm.expect(data.jti).to.exist;",
                  "    pm.expect(data.ticket_info).to.exist;",
                  "});",
                  "pm.test('åŒ…å«æƒç›Šä¿¡æ¯', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.ticket_info.entitlements).to.be.an('array');",
                  "    pm.expect(data.ticket_info.entitlements.length).to.be.greaterThan(0);",
                  "});",
                  "console.log('âœ… è§£ç æˆåŠŸ - æƒç›Šæœªæ¶ˆè€—');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3.4 æ ¸é”€ç¥¨åˆ¸ï¼ˆé¦–æ¬¡æ ¸é”€ï¼Œæ¶ˆè€—æƒç›Šï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"qr_token\": \"{{qr_token}}\", \"function_code\": \"ferry\", \"terminal_device_id\": \"TERMINAL-TEST-001\"}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "venue",
                "scan"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('æ ¸é”€æˆåŠŸ', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.result).to.equal('success');",
                  "    pm.expect(data.entitlements).to.be.an('array');",
                  "});",
                  "pm.test('æƒç›Šå·²æ¶ˆè€—', () => {",
                  "    const data = pm.response.json();",
                  "    const ferry = data.entitlements.find(e => e.function_code === 'ferry');",
                  "    pm.expect(ferry.remaining_uses).to.equal(0);",
                  "});",
                  "console.log('âœ… æ ¸é”€æˆåŠŸ - ferryæƒç›Šå·²æ¶ˆè€—');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3.5 é˜²æ¬ºè¯ˆï¼šé‡å¤æ ¸é”€æ£€æµ‹",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"qr_token\": \"{{qr_token}}\", \"function_code\": \"ferry\", \"terminal_device_id\": \"TERMINAL-TEST-002\"}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "venue",
                "scan"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 422ï¼ˆä¸šåŠ¡é”™è¯¯ï¼‰', () => {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "pm.test('é˜²æ¬ºè¯ˆæ£€æµ‹ç”Ÿæ•ˆ', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.reason).to.be.oneOf(['ALREADY_REDEEMED', 'NO_REMAINING']);",
                  "});",
                  "console.log('âœ… é˜²æ¬ºè¯ˆæ£€æµ‹: æ‹’ç»é‡å¤æ ¸é”€');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3.6 ã€ç¼ºå£è¡¥å……ã€‘å¤šæƒç›Šæ ¸é”€ï¼ˆåŒä¸€QRç ä¸åŒæƒç›Šï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"qr_token\": \"{{qr_token}}\", \"function_code\": \"gift\", \"terminal_device_id\": \"TERMINAL-GIFT-001\"}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "venue",
                "scan"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç æ˜¯ 200', () => pm.response.to.have.status(200));",
                  "pm.test('ä¸åŒæƒç›Šæ ¸é”€æˆåŠŸ', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.result).to.equal('success');",
                  "});",
                  "pm.test('giftæƒç›Šå·²æ¶ˆè€—', () => {",
                  "    const data = pm.response.json();",
                  "    const gift = data.entitlements.find(e => e.function_code === 'gift');",
                  "    pm.expect(gift.remaining_uses).to.equal(0);",
                  "});",
                  "console.log('âœ… åŒä¸€QRç å¯æ ¸é”€ä¸åŒæƒç›Š');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸ“± PRD-004: å¾®ä¿¡è®¤è¯æµç¨‹",
      "description": "å¾®ä¿¡ OAuthã€æ‰‹æœºå·ç»‘å®šã€ç™»å½•æ€§èƒ½æµ‹è¯•",
      "item": [
        {
          "name": "4.1 å¾®ä¿¡ç™»å½•ï¼ˆè·å– codeï¼‰",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/wechat/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "wechat",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('è¿”å›å¾®ä¿¡æˆæƒé“¾æ¥', () => {",
                  "    const data = pm.response.json();",
                  "    pm.expect(data.auth_url).to.include('weixin.qq.com');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "4.2 å¾®ä¿¡å›è°ƒï¼ˆæ¨¡æ‹Ÿï¼‰",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/wechat/callback?code=TEST_WECHAT_CODE_{{$timestamp}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "wechat",
                "callback"
              ],
              "query": [
                {
                  "key": "code",
                  "value": "TEST_WECHAT_CODE_{{$timestamp}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('OAuth å›è°ƒæˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å› JWT Token', () => pm.expect(data.access_token).to.exist);",
                  "pm.environment.set('jwt_token', data.access_token);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "4.3 ã€ç¼ºå£è¡¥å……ã€‘ç™»å½•æ€§èƒ½æµ‹è¯•ï¼ˆ<500msï¼‰",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/wechat/callback?code=PERF_TEST_{{$timestamp}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "wechat",
                "callback"
              ],
              "query": [
                {
                  "key": "code",
                  "value": "PERF_TEST_{{$timestamp}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ç™»å½•å“åº”æ—¶é—´ <500ms', () => {",
                  "    pm.expect(pm.response.responseTime).to.be.lessThan(500);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸ’° PRD-005: B2B è®¡è´¹ä¸åˆ†æ",
      "description": "åˆ†é”€å•†ç®¡ç†ã€è®¡è´¹æ±‡æ€»ã€è´¢åŠ¡å®¡è®¡",
      "item": [
        {
          "name": "5.1 åˆ›å»ºåˆ†é”€å•†",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reseller_name\": \"å¹¿å·æ—…è¡Œç¤¾\",\n  \"contact_email\": \"contact@gz-travel.com\",\n  \"commission_rate\": 0.12,\n  \"settlement_cycle\": \"monthly\",\n  \"region\": \"åå—\",\n  \"tier\": \"gold\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ota/resellers",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "resellers"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('åˆ†é”€å•†åˆ›å»ºæˆåŠŸ', () => pm.response.to.have.status(201));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å›åˆ†é”€å•†ID', () => pm.expect(data.id).to.exist);",
                  "pm.environment.set('reseller_id', data.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5.2 æŸ¥è¯¢åˆ†é”€å•†åˆ—è¡¨",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/resellers",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "resellers"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('æŸ¥è¯¢æˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å›åˆ†é”€å•†åˆ—è¡¨', () => {",
                  "    pm.expect(data.resellers).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5.3 æŸ¥è¯¢è®¡è´¹æ±‡æ€»",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/billing/summary?period=2025-11&reseller={{reseller_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "billing",
                "summary"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "2025-11"
                },
                {
                  "key": "reseller",
                  "value": "{{reseller_id}}"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('è®¡è´¹æ±‡æ€»æˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('åŒ…å«æ”¶å…¥å’Œä½£é‡‘', () => {",
                  "    pm.expect(data.total_revenue).to.exist;",
                  "    pm.expect(data.total_commission).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5.4 æ‰¹æ¬¡åˆ†æ",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/ota/batches/{{batch_id}}/analytics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "ota",
                "batches",
                "{{batch_id}}",
                "analytics"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('æ‰¹æ¬¡åˆ†ææˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('åŒ…å«æ¿€æ´»ç‡å’Œæ”¶å…¥', () => {",
                  "    pm.expect(data.activation_rate).to.exist;",
                  "    pm.expect(data.total_revenue).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5.5 ã€ç¼ºå£è¡¥å……ã€‘è´¢åŠ¡å®¡è®¡å¯¼å‡º",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{admin_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/financial-audit/export?start_date=2025-11-01&end_date=2025-11-30&format=csv",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "financial-audit",
                "export"
              ],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-11-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-11-30"
                },
                {
                  "key": "format",
                  "value": "csv"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('å®¡è®¡å¯¼å‡ºæˆåŠŸ', () => pm.response.to.have.status(200));",
                  "pm.test('è¿”å› CSV æ ¼å¼', () => {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('text/csv');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5.6 ã€ç¼ºå£è¡¥å……ã€‘æœˆåº¦è‡ªåŠ¨å¯¹è´¦",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{admin_api_key}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"period\": \"2025-11\",\n  \"reconcile_all_resellers\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/billing/reconcile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "admin",
                "billing",
                "reconcile"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('å¯¹è´¦ä»»åŠ¡è§¦å‘æˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('è¿”å›å¯¹è´¦ç»“æœ', () => {",
                  "    pm.expect(data.reconciled_count).to.exist;",
                  "    pm.expect(data.discrepancies).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸ”„ é›†æˆæµ‹è¯•ï¼šå®Œæ•´ä¸šåŠ¡æµç¨‹",
      "description": "ç«¯åˆ°ç«¯å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•",
      "item": [
        {
          "name": "E2E: OTA é¢„è®¢ â†’ æ¿€æ´» â†’ æ ¸é”€ â†’ è®¡è´¹",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"workflow\": \"complete_ota_lifecycle\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/test/e2e/ota-complete",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "test",
                "e2e",
                "ota-complete"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('å®Œæ•´æµç¨‹æ‰§è¡ŒæˆåŠŸ', () => pm.response.to.have.status(200));",
                  "const data = pm.response.json();",
                  "pm.test('æ‰€æœ‰æ­¥éª¤æˆåŠŸ', () => {",
                  "    pm.expect(data.reservation_created).to.be.true;",
                  "    pm.expect(data.reservation_activated).to.be.true;",
                  "    pm.expect(data.tickets_generated).to.be.true;",
                  "    pm.expect(data.redemption_completed).to.be.true;",
                  "    pm.expect(data.billing_calculated).to.be.true;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ]
}

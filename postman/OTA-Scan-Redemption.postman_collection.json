{
  "info": {
    "name": "OTA æ‰«ç æ ¸é”€æµç¨‹",
    "description": "OTAåˆä½œä¼™ä¼´çš„å®Œæ•´æ‰«ç æ ¸é”€æµç¨‹\n\n## ä¸šåŠ¡æµç¨‹\n\n1. **OTAåå°**: æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨åˆ¸ (POST /ota/tickets/bulk-generate)\n2. **OTAåå°**: ç”ŸæˆäºŒç»´ç  (POST /qr/:code)\n3. **ç”¨æˆ·**: æ”¶åˆ°äºŒç»´ç ï¼Œåˆ°åœºé¦†å‡ºç¤º\n4. **æ ¸é”€äººå‘˜æ­¥éª¤1**: æ‰«ç è§£å¯†ï¼ŒæŸ¥çœ‹ç¥¨åˆ¸ä¿¡æ¯ (POST /qr/decrypt) - ä¸æ¶ˆè€—æƒç›Š\n5. **æ ¸é”€äººå‘˜æ­¥éª¤2**: ç¡®è®¤åæ ¸é”€ï¼Œæ¶ˆè€—æƒç›Š (POST /venue/scan) - æ¶ˆè€—æƒç›Š\n\n## å¿«é€Ÿå¼€å§‹\n\n1. è¿è¡Œ 'Step 1: OTAæ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨åˆ¸' è·å–ticket_code\n2. è¿è¡Œ 'Step 2: ç”ŸæˆäºŒç»´ç ' è·å–encrypted_qr_data\n3. è¿è¡Œ 'Step 3: æ ¸é”€äººå‘˜æ‰«ç è§£å¯†' æŸ¥çœ‹ç¥¨åˆ¸ä¿¡æ¯ï¼ˆä¸æ¶ˆè€—ï¼‰\n4. è¿è¡Œ 'Step 4: ç¡®è®¤æ ¸é”€ferry' å®é™…æ¶ˆè€—æƒç›Š\n5. è¿è¡Œ 'Step 5: å†æ¬¡æ ¸é”€gift' ä½¿ç”¨åŒä¸€QRç æ ¸é”€ä¸åŒæƒç›Š\n\næ‰€æœ‰å˜é‡è‡ªåŠ¨å¡«å……ã€‚",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "ota_api_key",
      "value": "ota_test_key_12345",
      "type": "string"
    },
    {
      "key": "ticket_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "encrypted_qr_data",
      "value": "",
      "type": "string"
    },
    {
      "key": "batch_id",
      "value": "OTA-DEMO-{{$timestamp}}",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "å®Œæ•´OTAæ ¸é”€æµç¨‹ (Complete Flow)",
      "item": [
        {
          "name": "Step 1: OTAæ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨åˆ¸",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.tickets && response.tickets.length > 0) {",
                  "        const ticketCode = response.tickets[0].ticket_code;",
                  "        pm.collectionVariables.set('ticket_code', ticketCode);",
                  "        console.log('âœ… ç¥¨åˆ¸ç”ŸæˆæˆåŠŸ');",
                  "        console.log('Ticket Code:', ticketCode);",
                  "        console.log('æ‰¹æ¬¡ID:', response.batch_id);",
                  "        console.log('ç”Ÿæˆæ•°é‡:', response.tickets.length);",
                  "        console.log('');",
                  "        console.log('æƒç›Šåˆ—è¡¨:');",
                  "        response.tickets[0].entitlements.forEach(ent => {",
                  "            console.log(`  - ${ent.function_code}: ${ent.remaining_uses}æ¬¡`);",
                  "        });",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_id\": 106,\n  \"quantity\": 1,\n  \"batch_id\": \"{{batch_id}}\",\n  \"distribution_mode\": \"direct_sale\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/ota/tickets/bulk-generate",
              "host": ["{{base_url}}"],
              "path": ["ota", "tickets", "bulk-generate"]
            },
            "description": "**OTAåå°æ“ä½œ**: æ‰¹é‡ç”Ÿæˆé¢„åˆ¶ç¥¨åˆ¸\n\n- äº§å“106åŒ…å«3ä¸ªæƒç›Š: ferry(æ¸¡è½®), gift(ç¤¼å“), tokens(æ¸¸ä¹å¸)\n- è¿”å›ticket_codeç”¨äºåç»­ç”ŸæˆäºŒç»´ç \n- çŠ¶æ€: PRE_GENERATED"
          },
          "response": []
        },
        {
          "name": "Step 2: ç”ŸæˆäºŒç»´ç  (OTAå‘ç»™ç”¨æˆ·)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('encrypted_qr_data', response.encrypted_data);",
                  "    console.log('âœ… äºŒç»´ç ç”ŸæˆæˆåŠŸ');",
                  "    console.log('JTI:', response.jti);",
                  "    console.log('æœ‰æ•ˆæœŸè‡³:', response.expires_at);",
                  "    console.log('åŠ å¯†æ•°æ®å·²ä¿å­˜ï¼Œå¯ç”¨äºæ ¸é”€');",
                  "    console.log('');",
                  "    console.log('ğŸ“± æ­¤äºŒç»´ç å‘é€ç»™ç”¨æˆ·ï¼Œç”¨æˆ·åˆ°åœºé¦†å‡ºç¤º');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"expiry_minutes\": 1440\n}"
            },
            "url": {
              "raw": "{{base_url}}/qr/{{ticket_code}}",
              "host": ["{{base_url}}"],
              "path": ["qr", "{{ticket_code}}"]
            },
            "description": "**OTAåå°æ“ä½œ**: ä¸ºç¥¨åˆ¸ç”ŸæˆäºŒç»´ç \n\n- ä½¿ç”¨API Keyè®¤è¯\n- äºŒç»´ç æœ‰æ•ˆæœŸ24å°æ—¶\n- è¿”å›åŠ å¯†çš„QRæ•°æ®å’Œå›¾ç‰‡\n- QRæ•°æ®æ ¼å¼: `iv:encrypted:authTag:signature`"
          },
          "response": []
        },
        {
          "name": "Step 3: æ ¸é”€äººå‘˜æ‰«ç è§£å¯† (æŸ¥çœ‹ä¿¡æ¯)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('âœ… äºŒç»´ç è§£å¯†æˆåŠŸ - æŸ¥çœ‹ç¥¨åˆ¸ä¿¡æ¯');",
                  "    console.log('');",
                  "    console.log('ğŸ“‹ ç¥¨åˆ¸ä¿¡æ¯:');",
                  "    console.log('  ç¥¨åˆ¸å·:', response.ticket_code);",
                  "    console.log('  ç±»å‹:', response.ticket_info.ticket_type);",
                  "    console.log('  çŠ¶æ€:', response.ticket_info.status);",
                  "    console.log('');",
                  "    console.log('ğŸ‘¤ é¡¾å®¢ä¿¡æ¯:');",
                  "    if (response.ticket_info.customer_info) {",
                  "        const customer = response.ticket_info.customer_info;",
                  "        console.log('  ç±»å‹:', customer.type);",
                  "        console.log('  å§“å:', customer.name || 'N/A');",
                  "    }",
                  "    console.log('');",
                  "    console.log('ğŸ« å¯ç”¨æƒç›Š:');",
                  "    response.ticket_info.entitlements.forEach(ent => {",
                  "        console.log(`  âœ“ ${ent.function_code}: å‰©ä½™${ent.remaining_uses}æ¬¡`);",
                  "    });",
                  "    console.log('');",
                  "    console.log('âš ï¸  æ³¨æ„: æ­¤æ“ä½œä»…æŸ¥çœ‹ä¿¡æ¯ï¼Œæœªæ¶ˆè€—æƒç›Š');",
                  "    console.log('â¡ï¸  ç¡®è®¤ä¿¡æ¯åï¼Œä½¿ç”¨ POST /venue/scan è¿›è¡Œå®é™…æ ¸é”€');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"encrypted_data\": \"{{encrypted_qr_data}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/qr/decrypt",
              "host": ["{{base_url}}"],
              "path": ["qr", "decrypt"]
            },
            "description": "**æ ¸é”€äººå‘˜æ“ä½œ - ç¬¬1æ­¥**: æ‰«ç è§£å¯†ï¼ŒæŸ¥çœ‹ç¥¨åˆ¸ä¿¡æ¯\n\nâš ï¸ **é‡è¦**: æ­¤ç«¯ç‚¹ä»…ç”¨äºæŸ¥çœ‹ä¿¡æ¯ï¼Œ**ä¸ä¼šæ¶ˆè€—æƒç›Š**\n\nè¿”å›ä¿¡æ¯:\n- ç¥¨åˆ¸åŸºæœ¬ä¿¡æ¯ï¼ˆçŠ¶æ€ã€ç±»å‹ï¼‰\n- é¡¾å®¢ä¿¡æ¯ï¼ˆå§“åã€ç±»å‹ï¼‰\n- å¯ç”¨æƒç›Šåˆ—è¡¨ï¼ˆfunction_codeå’Œå‰©ä½™æ¬¡æ•°ï¼‰\n- äº§å“ä¿¡æ¯\n\næ ¸é”€äººå‘˜æŸ¥çœ‹ä¿¡æ¯åï¼Œç¡®è®¤æ— è¯¯å†æ‰§è¡Œå®é™…æ ¸é”€ã€‚"
          },
          "response": []
        },
        {
          "name": "Step 4: ç¡®è®¤æ ¸é”€ - ferry (æ¶ˆè€—æƒç›Š)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('âœ… æ ¸é”€æˆåŠŸ - ferryæƒç›Šå·²æ¶ˆè€—');",
                  "    console.log('');",
                  "    console.log('æ ¸é”€ç»“æœ:', response.result);",
                  "    console.log('ç¥¨åˆ¸çŠ¶æ€:', response.ticket_status);",
                  "    console.log('åœºé¦†:', response.venue_info.venue_name);",
                  "    console.log('ç»ˆç«¯:', response.venue_info.terminal_device);",
                  "    console.log('');",
                  "    console.log('å‰©ä½™æƒç›Š:');",
                  "    response.entitlements.forEach(ent => {",
                  "        const status = ent.remaining_uses > 0 ? 'âœ“ å¯ç”¨' : 'âœ— å·²ç”¨';",
                  "        console.log(`  ${status} ${ent.function_code}: ${ent.remaining_uses}æ¬¡`);",
                  "    });",
                  "    console.log('');",
                  "    console.log('æ€§èƒ½æŒ‡æ ‡:');",
                  "    console.log('  å“åº”æ—¶é—´:', response.performance_metrics.response_time_ms + 'ms');",
                  "    console.log('  é˜²æ¬ºè¯ˆæ£€æŸ¥:', response.performance_metrics.fraud_checks_passed ? 'é€šè¿‡' : 'å¤±è´¥');",
                  "} else if (pm.response.code === 422) {",
                  "    const response = pm.response.json();",
                  "    console.log('âŒ æ ¸é”€å¤±è´¥');",
                  "    console.log('åŸå› :', response.reason);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qr_token\": \"{{encrypted_qr_data}}\",\n  \"function_code\": \"ferry\",\n  \"terminal_device_id\": \"TERMINAL-CP-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": ["{{base_url}}"],
              "path": ["venue", "scan"]
            },
            "description": "**æ ¸é”€äººå‘˜æ“ä½œ - ç¬¬2æ­¥**: å®é™…æ ¸é”€ï¼Œæ¶ˆè€—ferryæƒç›Š\n\nâœ… **é‡è¦**: æ­¤ç«¯ç‚¹ä¼š**å®é™…æ¶ˆè€—æƒç›Š**ï¼Œå‡å°‘remaining_uses\n\næ“ä½œ:\n1. ä½¿ç”¨ç›¸åŒçš„encrypted_qr_data\n2. æŒ‡å®šè¦æ ¸é”€çš„function_code (ferry)\n3. æä¾›ç»ˆç«¯è®¾å¤‡ID\n\né˜²æ¬ºè¯ˆ:\n- JTI + function_codeç»„åˆæ£€æŸ¥\n- åŒä¸€QRç çš„ferryæƒç›Šåªèƒ½æ ¸é”€ä¸€æ¬¡\n- ä½†å¯ä»¥ç”¨åŒä¸€QRç æ ¸é”€å…¶ä»–æƒç›Š(gift, tokens)"
          },
          "response": []
        },
        {
          "name": "Step 5: å†æ¬¡æ ¸é”€ - gift (åŒä¸€QRç )",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('âœ… æ ¸é”€æˆåŠŸ - giftæƒç›Šå·²æ¶ˆè€—');",
                  "    console.log('');",
                  "    console.log('æ ¸é”€ç»“æœ:', response.result);",
                  "    console.log('ç¥¨åˆ¸çŠ¶æ€:', response.ticket_status);",
                  "    console.log('');",
                  "    console.log('å‰©ä½™æƒç›Š:');",
                  "    response.entitlements.forEach(ent => {",
                  "        const status = ent.remaining_uses > 0 ? 'âœ“ å¯ç”¨' : 'âœ— å·²ç”¨';",
                  "        console.log(`  ${status} ${ent.function_code}: ${ent.remaining_uses}æ¬¡`);",
                  "    });",
                  "    console.log('');",
                  "    console.log('ğŸ’¡ è¯´æ˜: åŒä¸€QRç å¯ä»¥æ ¸é”€å¤šä¸ªä¸åŒçš„æƒç›Š');",
                  "    console.log('   - ferry: å·²æ ¸é”€ âœ“');",
                  "    console.log('   - gift: å·²æ ¸é”€ âœ“');",
                  "    console.log('   - tokens: å¾…æ ¸é”€');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qr_token\": \"{{encrypted_qr_data}}\",\n  \"function_code\": \"gift\",\n  \"terminal_device_id\": \"TERMINAL-GIFT-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": ["{{base_url}}"],
              "path": ["venue", "scan"]
            },
            "description": "**æ¼”ç¤ºå¤šæƒç›Šæ ¸é”€**: ä½¿ç”¨åŒä¸€QRç æ ¸é”€giftæƒç›Š\n\nå…³é”®ç‰¹æ€§:\n- âœ… åŒä¸€QRç å¯ä»¥æ ¸é”€å¤šä¸ªä¸åŒæƒç›Š\n- âœ… æ¯ä¸ªæƒç›Šåªèƒ½æ ¸é”€ä¸€æ¬¡ï¼ˆé˜²é‡å¤ï¼‰\n- âœ… è·¨ç»ˆç«¯ã€è·¨åœºé¦†çš„é˜²æ¬ºè¯ˆæ£€æµ‹\n\nç¤ºä¾‹:\n1. ferryæƒç›Šåœ¨central-pieræ ¸é”€\n2. giftæƒç›Šåœ¨gift-shopæ ¸é”€\n3. tokensæƒç›Šåœ¨playgroundæ ¸é”€\n\néƒ½ä½¿ç”¨åŒä¸€ä¸ªQRç ï¼Œä½†function_codeä¸åŒã€‚"
          },
          "response": []
        }
      ],
      "description": "å®Œæ•´çš„OTAæ‰«ç æ ¸é”€æµç¨‹ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰æ­¥éª¤"
    },
    {
      "name": "é”™è¯¯åœºæ™¯æµ‹è¯•",
      "item": [
        {
          "name": "å°è¯•é‡å¤æ ¸é”€ (åº”è¢«æ‹’ç»)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 422) {",
                  "    const response = pm.response.json();",
                  "    console.log('âœ… é˜²æ¬ºè¯ˆæ£€æµ‹ç”Ÿæ•ˆ');",
                  "    console.log('æ‹’ç»åŸå› :', response.reason);",
                  "    console.log('è¯´æ˜: åŒä¸€QRç çš„ferryæƒç›Šä¸èƒ½æ ¸é”€ä¸¤æ¬¡');",
                  "    ",
                  "    pm.test('æ‹’ç»é‡å¤æ ¸é”€', () => {",
                  "        pm.expect(response.reason).to.be.oneOf(['ALREADY_REDEEMED', 'NO_REMAINING']);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qr_token\": \"{{encrypted_qr_data}}\",\n  \"function_code\": \"ferry\",\n  \"terminal_device_id\": \"TERMINAL-CP-002\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": ["{{base_url}}"],
              "path": ["venue", "scan"]
            },
            "description": "æµ‹è¯•é˜²æ¬ºè¯ˆæœºåˆ¶: å°è¯•ç”¨åŒä¸€QRç é‡å¤æ ¸é”€ferryæƒç›Š\n\né¢„æœŸç»“æœ:\n- HTTP 422\n- reason: ALREADY_REDEEMED æˆ– NO_REMAINING\n- é˜²æ¬ºè¯ˆæ£€æŸ¥åŸºäº (JTI + function_code) ç»„åˆ"
          },
          "response": []
        },
        {
          "name": "æ ¸é”€ä¸å­˜åœ¨çš„æƒç›Š (åº”è¢«æ‹’ç»)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qr_token\": \"{{encrypted_qr_data}}\",\n  \"function_code\": \"INVALID_FUNCTION\",\n  \"terminal_device_id\": \"TERMINAL-CP-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/venue/scan",
              "host": ["{{base_url}}"],
              "path": ["venue", "scan"]
            },
            "description": "æµ‹è¯•ä¸šåŠ¡è§„åˆ™éªŒè¯: æ ¸é”€ç¥¨åˆ¸ä¸åŒ…å«çš„æƒç›Š\n\né¢„æœŸç»“æœ:\n- HTTP 422\n- reason: WRONG_FUNCTION"
          },
          "response": []
        },
        {
          "name": "è§£å¯†æ— æ•ˆäºŒç»´ç ",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"encrypted_data\": \"invalid-qr-data\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/qr/decrypt",
              "host": ["{{base_url}}"],
              "path": ["qr", "decrypt"]
            },
            "description": "æµ‹è¯•å®‰å…¨éªŒè¯: è§£å¯†æ ¼å¼é”™è¯¯çš„QRæ•°æ®\n\né¢„æœŸç»“æœ:\n- HTTP 400 æˆ– 401\n- é”™è¯¯ä¿¡æ¯: è§£å¯†å¤±è´¥"
          },
          "response": []
        }
      ],
      "description": "æµ‹è¯•å„ç§é”™è¯¯åœºæ™¯å’Œé˜²æ¬ºè¯ˆæœºåˆ¶"
    },
    {
      "name": "æŸ¥è¯¢ç«¯ç‚¹ (ä¸æ¶ˆè€—æƒç›Š)",
      "item": [
        {
          "name": "æŸ¥è¯¢ç¥¨åˆ¸ä¿¡æ¯ - GETæ–¹å¼",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('âœ… ç¥¨åˆ¸ä¿¡æ¯æŸ¥è¯¢æˆåŠŸ');",
                  "    console.log('');",
                  "    console.log('ç¥¨åˆ¸å·:', response.ticket_code);",
                  "    console.log('ç±»å‹:', response.ticket_type);",
                  "    console.log('çŠ¶æ€:', response.status);",
                  "    console.log('');",
                  "    console.log('æƒç›Šåˆ—è¡¨:');",
                  "    response.entitlements.forEach(ent => {",
                  "        console.log(`  - ${ent.function_code}: ${ent.remaining_uses}æ¬¡`);",
                  "    });",
                  "    console.log('');",
                  "    console.log('âš ï¸  æ³¨æ„: GET /qr/:code/info ä»…æŸ¥è¯¢ï¼Œä¸æ¶ˆè€—æƒç›Š');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{ota_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/qr/{{ticket_code}}/info",
              "host": ["{{base_url}}"],
              "path": ["qr", "{{ticket_code}}", "info"]
            },
            "description": "**æŸ¥è¯¢ç«¯ç‚¹**: æ ¹æ®ticket_codeæŸ¥è¯¢ç¥¨åˆ¸ä¿¡æ¯\n\nâš ï¸ ä¸æ¶ˆè€—æƒç›Šï¼Œä»…ç”¨äº:\n- åå°ç³»ç»ŸæŸ¥è¯¢\n- å®¢æœæŸ¥è¯¢\n- ç»Ÿè®¡æŠ¥è¡¨\n\nä¸ POST /qr/decrypt çš„åŒºåˆ«:\n- GET /qr/:code/info: éœ€è¦ticket_codeï¼Œä¸éœ€è¦QRåŠ å¯†æ•°æ®\n- POST /qr/decrypt: éœ€è¦encrypted_dataï¼Œæ¨¡æ‹Ÿæ‰«ç åœºæ™¯"
          },
          "response": []
        }
      ],
      "description": "æŸ¥è¯¢ç¥¨åˆ¸ä¿¡æ¯çš„ç«¯ç‚¹ï¼Œä¸ä¼šæ¶ˆè€—æƒç›Š"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// è‡ªåŠ¨è®¾ç½®æ‰¹æ¬¡ID",
          "if (!pm.collectionVariables.get('batch_id')) {",
          "    pm.collectionVariables.set('batch_id', 'OTA-DEMO-' + Date.now());",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// å…¨å±€æ—¥å¿—",
          "console.log('========================================');",
          "console.log('çŠ¶æ€ç :', pm.response.code, pm.response.status);",
          "console.log('========================================');"
        ]
      }
    }
  ]
}

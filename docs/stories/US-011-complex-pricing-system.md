---
id: US-011
title: Complex Pricing System
owner: Product
status: "Done"
priority: High
created_date: "2025-10-22"
last_updated: "2025-12-17"
business_requirement: "PRD-001"
depends_on:
  - US-001  # 基础票务系统
cards:
  - complex-pricing-engine
  - schedule-pricing-rules
---

## 变更日志
| 日期 | 变更 | 原因 |
|------|------|------|
| 2025-12-17 | 格式重构 | 验收标准改为 Given/When/Then 格式 |
| 2025-10-22 | 创建 | 初始版本 |

---

## 用户目标

**作为** 邮轮/旅游运营商
**我想要** 基于多种变量（日期类型、客户类型、套餐等级、特殊活动）提供动态定价
**以便于** 最大化收益，同时提供透明的价格匹配市场需求和客户群体

---

## 范围

### 包含 (In Scope)
- 按时间段定价（工作日/周末/节假日）
- 按客户类型定价（成人/儿童/长者）
- 套餐等级定价（Premium/Pet/Deluxe）
- 特殊日期定价

### 不包含 (Out of Scope)
- 实时需求定价
- 个性化定价
- 竞品价格监控

---

## 验收标准

### A. 工作日与周末价格差异
- **Given** 用户选择购买 Premium Plan 套餐
- **When** 用户选择工作日出行
- **Then** 成人价格显示为 $288

- **Given** 用户选择购买 Premium Plan 套餐
- **When** 用户选择周末出行
- **Then** 成人价格显示为 $318（周末溢价 $30）

### B. 客户类型价格差异
- **Given** 用户选择购买任意套餐
- **When** 用户选择儿童或长者票
- **Then** 价格固定为 $188，不受工作日/周末影响

### C. 套餐等级价格差异
- **Given** 用户浏览不同套餐
- **When** 用户查看价格
- **Then** Premium Plan 显示 $288/$318，Pet Plan 显示 $188，Deluxe Tea Set 显示 $788/$888

### D. 特殊日期定价
- **Given** 运营商设置了特殊日期（如 31/12/2025 跨年）
- **When** 用户选择该日期购买
- **Then** 系统应用特殊日期价格规则

### E. 订单价格计算
- **Given** 用户选择了套餐、客户类型和出行日期
- **When** 用户提交订单
- **Then** 系统正确计算总价，并在订单中显示价格明细

### F. 混合订单
- **Given** 用户购买多张票（如 2 成人 + 1 儿童）
- **When** 用户提交订单
- **Then** 系统分别计算每种客户类型的价格并汇总

---

## 业务规则

### 时间规则
- **工作日**：星期一至五，使用基础价格
- **周末/节假日**：星期六至日及公众假期，成人加收 $30
- **特殊活动**：特定日期可设置自定义价格

### 客户类型规则
- **成人**：完整动态定价
- **儿童/长者**：固定优惠价 $188，不受时间影响
- **混合订单**：支持同一订单包含多种客户类型

### 套餐等级规则
- **Premium Plan**：基础套餐，成人 $288/$318
- **Pet Plan**：宠物套餐，统一 $188
- **Deluxe Tea Set**：高端套餐，成人 $788/$888

---

## 关联 Cards

| Card | 状态 | 描述 |
|------|------|------|
| complex-pricing-engine | Done | 核心价格计算逻辑 |
| schedule-pricing-rules | Done | 日历和活动定价规则 |
